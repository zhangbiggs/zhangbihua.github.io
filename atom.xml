<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>biggs blog</title>
  <subtitle>javascript | Front-End developer</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://zhangbihua.github.io/"/>
  <updated>2017-07-13T08:08:04.834Z</updated>
  <id>https://zhangbihua.github.io/</id>
  
  <author>
    <name>zhangbihua</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>prototype和__proto__(个人理解)</title>
    <link href="https://zhangbihua.github.io/2017/07/13/prototypeAndProto/"/>
    <id>https://zhangbihua.github.io/2017/07/13/prototypeAndProto/</id>
    <published>2017-07-13T08:08:04.834Z</published>
    <updated>2017-07-13T08:08:04.834Z</updated>
    
    <content type="html"><![CDATA[<h2 id="放关系图"><a href="#放关系图" class="headerlink" title="放关系图"></a>放关系图</h2><p><img src="http://harttle.com/assets/img/blog/javascript/js-proto.png" alt="prototype and __proto__"></p>
<h2 id="Object构造函数，创建一个对象包装器。"><a href="#Object构造函数，创建一个对象包装器。" class="headerlink" title="Object构造函数，创建一个对象包装器。"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="external">Object</a>构造函数，创建一个对象包装器。</h2><h2 id="Function构造函数，-创建一个新的Function对象。-在-JavaScript-中-每个函数实际上都是一个Function对象。"><a href="#Function构造函数，-创建一个新的Function对象。-在-JavaScript-中-每个函数实际上都是一个Function对象。" class="headerlink" title="Function构造函数， 创建一个新的Function对象。 在 JavaScript 中, 每个函数实际上都是一个Function对象。"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="external">Function构造函数</a>， 创建一个新的Function对象。 在 JavaScript 中, 每个函数实际上都是一个Function对象。</h2><h3 id="引用ECMAScript的解释"><a href="#引用ECMAScript的解释" class="headerlink" title="引用ECMAScript的解释"></a>引用ECMAScript的解释</h3><blockquote>
<p><a href="https://www.ecma-international.org/ecma-262/5.1/#sec-15%EF%BC%8C_%E9%B8%A1%E5%92%8C%E8%9B%8B_%E7%9A%84%E9%97%AE%E9%A2%98%E5%B0%B1%E6%98%AF%E8%BF%99%E4%B9%88%E5%87%BA%E7%8E%B0%E5%92%8C%E8%AE%BE%E8%AE%A1%E7%9A%84%EF%BC%9A**%60Function%60%E7%BB%A7%E6%89%BF%60Function%60%E6%9C%AC%E8%BA%AB%EF%BC%8C%60Function.prototype%60%E7%BB%A7%E6%89%BF%60Object.prototype%60%E3%80%82" target="_blank" rel="external">Each constructor is a function that has a property named “prototype” that is used to implement prototype-based inheritance and shared properties</a></p>
<p>翻译： 每个构造器都是有着“prototype”属性的函数，用于实现基于原型的继承和共享属性</p>
</blockquote>
<p>在javascript中， 有且只有Function构造器的prototype === __proto__<br> <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Function</span>.ptototype === <span class="built_in">Function</span>.__proto__ <span class="comment">// === true</span></div></pre></td></tr></table></figure></p>
<p>为什么Function构造器会有这样的设计，原因是因为js没有类的机制，是通过对象的__proto__属性指向父类的prototype属性实现</p>
<h3 id="引用ECMAScript的解释-1"><a href="#引用ECMAScript的解释-1" class="headerlink" title="引用ECMAScript的解释"></a>引用ECMAScript的解释</h3><hr>
<p> <img src="http://i.imgur.com/cCzkv.png" alt="how_Prototypal_Inheritance works"></p>
<blockquote>
<p>CF is a constructor (and also an object). Five objects have been created by using new expressions: cf1, cf2, cf3, cf4, and cf5. Each of these objects contains properties named q1 and q2. The dashed lines represent the implicit prototype relationship; so, for example, cf3’s prototype is CFp. The constructor, CF, has two properties itself, named P1 and P2, which are not visible to CFp, cf1, cf2, cf3, cf4, or cf5. The property named CFP1 in CFp is shared by cf1, cf2, cf3, cf4, and cf5 (but not by CF), as are any properties found in CFp’s implicit prototype chain that are not named q1, q2, or CFP1. Notice that there is no implicit prototype link between CF and CFp.<br>Unlike class-based object languages, properties can be added to objects dynamically by assigning values to them. That is, constructors are not required to name or assign values to all or any of the constructed object’s properties. In the above diagram, one could add a new shared property for cf1, cf2, cf3, cf4, and cf5 by assigning a new value to the property in CFp.</p>
</blockquote>
<p>翻译： </p>
<blockquote>
<p>CF是一个构造（以及一个对象）。五个对象已经通过使用创建的new：表达式 CF 1，CF 2，CF 3，CF 4，和CF 5。每个对象包含一个名为性质Q1和Q2。虚线表示隐式原型关系; 因此，例如， CF 3的原型是CF p。的构造，CF，有两个属性本身，命名为P1和P2，这是不可见CF p，CF 1，CF 2，CF 3， CF 4，或CF 5。命名属性CFP1在 CF p是由共享CF 1，CF 2，CF 3， CF 4，和CF 5（而不是由CF），因为是在发现的任何属性 CF p未命名的隐式原型链Q1， Q2，或CFP1。请注意，之间不存在隐式原型链接CF和CF p。</p>
<p>不像基于类的对象的语言，属性可以动态地将它们赋值被添加到对象。也就是说，构造函数不需要命名或赋值构造的对象的属性的全部或任何。另外，在上述图中，人们可以添加对新的共享属性CF 1，CF 2，CF 3， CF 4，和CF 5 通过在属性分配一个新的值CF p。</p>
</blockquote>
<hr>
<h3 id="实现一个函数的声明以及在这个函数的prototype属性加一个属性"><a href="#实现一个函数的声明以及在这个函数的prototype属性加一个属性" class="headerlink" title="实现一个函数的声明以及在这个函数的prototype属性加一个属性"></a>实现一个函数的声明以及在这个函数的prototype属性加一个属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animate</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name </div><div class="line">&#125;</div><div class="line">Animate.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> myAnimate = <span class="keyword">new</span> Animate(<span class="string">'nini'</span>)</div></pre></td></tr></table></figure>
<p>因为我们在声明Animate函数时，broswer runtime 载入Function构造器，Animate.prototype有两个属性{constructor: XX，__proto__:xxx},<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Animate.prototype.__proto__ === <span class="built_in">Function</span>.prototype.__proto__  &amp;&amp; Animate.prototype.__proto__ === <span class="built_in">Object</span>.prototype </div><div class="line">Animate.__proto__ === <span class="built_in">Function</span>.__proto__</div><div class="line">animate.__proto__ !== Animate.prototype &amp;&amp; Animate.__proto__.__proto__ === Animate.prototype.__proto__, </div><div class="line">Animate.__proto__.__proto__ === Animate.prototype.__proto__</div></pre></td></tr></table></figure></p>
<p>animate.__proto__ 和 animate.prototype 的原型链(__proto__)都指向Object.prototype</p>
<h3 id="NOTE-前面我们说过了Function构造器是js中唯一一个prototype属性-等于-原型链（-proto-属性的对象-Function-prototype-Function-proto"><a href="#NOTE-前面我们说过了Function构造器是js中唯一一个prototype属性-等于-原型链（-proto-属性的对象-Function-prototype-Function-proto" class="headerlink" title="NOTE: 前面我们说过了Function构造器是js中唯一一个prototype属性 等于 原型链（__proto__)属性的对象( Function.prototype === Function.__proto__)"></a>NOTE: 前面我们说过了Function构造器是js中唯一一个prototype属性 等于 原型链（__proto__)属性的对象( Function.prototype === Function.__proto__)</h3><blockquote>
<p>为构造函数设置一个prototype属性。<br>这个属性包含一个对象（以下简称”prototype对象”），所有实例对象需要共享的属性和方法，都放在这个对象里面；那些不需要共享的属性和方法，就放在构造函数里面。<br>实例对象一旦创建，将自动引用prototype对象的属性和方法(Function.prototype === Function.__proto__ 的设计就是为了实现这个功能)<br>也就是说，实例对象的属性和方法，分成两种，一种是本地的，另一种是引用的。</p>
</blockquote>
<hr>
<p>在例子new Animate(‘nini’)时，一个新对象被创建。它继承自Animate.prototype</p>
<h2 id="实现一个简单的继承类"><a href="#实现一个简单的继承类" class="headerlink" title="实现一个简单的继承类"></a>实现一个简单的继承类</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animate</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name </div><div class="line">&#125;</div><div class="line">Animate.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dog</span> (<span class="params">name, color</span>) </span>&#123;</div><div class="line">  Animate.call(<span class="keyword">this</span>, name)</div><div class="line">  <span class="keyword">this</span>.color = color</div><div class="line">&#125;</div><div class="line">Dog.prototype = <span class="built_in">Object</span>.create(Animate.prototype,&#123;  <span class="comment">// 设置Dog.prototype的\_\_proto\_\_为animate.prototype</span></div><div class="line">  sayColor: &#123;</div><div class="line">    <span class="attr">value</span>: <span class="function"><span class="keyword">function</span>  (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.color)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">writable</span>: <span class="literal">true</span></div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">var</span> myAnimate = <span class="keyword">new</span> Animate(<span class="string">'nini'</span>)</div><div class="line"><span class="keyword">var</span> myDog = <span class="keyword">new</span> Dog(<span class="string">'jiji'</span>, <span class="string">'red'</span>);</div><div class="line"></div><div class="line">myAnimate.sayName() <span class="comment">// ===&gt; 'nini'</span></div><div class="line">myDog.sayName() <span class="comment">// ===&gt; 'jiji'</span></div><div class="line">myDog.sayColor() <span class="comment">// ===&gt; 'red'</span></div><div class="line">Dog.say() <span class="comment">// Uncaught TypeError: Dog.say is not a function</span></div><div class="line">Animate.say() <span class="comment">// Uncaught TypeError: Animate.say is not a function</span></div></pre></td></tr></table></figure>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">mdn</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;放关系图&quot;&gt;&lt;a href=&quot;#放关系图&quot; class=&quot;headerlink&quot; title=&quot;放关系图&quot;&gt;&lt;/a&gt;放关系图&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://harttle.com/assets/img/blog/javascript/js-pro
    
    </summary>
    
      <category term="javascript" scheme="https://zhangbihua.github.io/categories/javascript/"/>
    
      <category term="MDN" scheme="https://zhangbihua.github.io/categories/javascript/MDN/"/>
    
    
      <category term="prototype和__proto__" scheme="https://zhangbihua.github.io/tags/prototype%E5%92%8C-proto/"/>
    
  </entry>
  
  <entry>
    <title>Promise</title>
    <link href="https://zhangbihua.github.io/2017/07/13/Promise/"/>
    <id>https://zhangbihua.github.io/2017/07/13/Promise/</id>
    <published>2017-07-13T06:11:11.000Z</published>
    <updated>2017-07-13T12:54:38.381Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://mdn.mozillademos.org/files/8633/promises.png" alt="promise"><br>Promise 对象用于一个异步操作的最终完成（或失败）及其结果值的表示。(简单点说就是处理异步请求。。我们经常会做些承诺，如果我赢了你就嫁给我，如果输了我就嫁给你之类的诺言。这就是promise的中文含义。一个诺言，一个成功，一个失败。)</p>
<p>new Promise(<br>    /<em> executor </em>/<br>    function(resolve, reject) {…}<br>);</p>
<h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><h3 id="executor-resolve-reject"><a href="#executor-resolve-reject" class="headerlink" title="executor(resolve, reject)"></a>executor(resolve, reject)</h3><p>该函数会马上被调用，它带有两个参数的函数对象：<br>    executor是一个带有resolve和reject两个参数的函数 。executor 函数在Promise构造函数执行时同步执行，被传递resolve和reject函数（executor 函数在Promise构造函数返回新建对象前被调用）。resolve 和 reject 函数被调用时，分别将promise的状态改为fulfilled(完成)或rejected（失败）。executor 内部通常会执行一些异步操作，一旦完成，可以调用resolve函数来将promise状态改成fulfilled，或者在发生错误时将它的状态改为rejected</p>
<h3 id="解决函数resolve"><a href="#解决函数resolve" class="headerlink" title="解决函数resolve()"></a>解决函数resolve()</h3><p>用特定值满足绑定的promise，或者把状态传递到一个已存在的promise。如果绑定的promise已经被解决（可能是一个值，也可能是一个rejection，或者是另一个promise），该方法不会做任何事。</p>
<blockquote>
<p>note: 用特定值满足绑定的promise，或者把状态传递到一个已存在的promise。如果绑定的promise已经被解决（可能是一个值，也可能是一个rejection，或者是另一个promise），该方法不会做任何事。</p>
</blockquote>
<hr>
<h3 id="拒绝函数reject"><a href="#拒绝函数reject" class="headerlink" title="拒绝函数reject()"></a>拒绝函数reject()</h3><p>用特定原因拒绝绑定的promise。如果promise已经被解决了，不管是值，拒绝，还是另一个promise，这个方法都不会做任何事。</p>
<h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p><strong>Promise</strong> 对象是一个代理对象（代理一个值），被代理的值在Promise对象创建时可能是未知的。它允许你为异步操作的成功和失败分别绑定相应的处理方法（handlers ）。 这让异步方法可以像同步方法那样返回值，但并不是立即返回最终执行结果，而是一个能代表未来出现的结果的promise对象</p>
<p>一个 Promise有以下几种状态:</p>
<ul>
<li>未完成状态(pending), 此时完成值还不可用，他是唯一一个能够转换为其他状态的状态。</li>
<li>已完成状态(fulfilled), 此时完成值可用，完成值与promise永久绑定，可为任意值，包括undefined</li>
<li>拒绝状态(rejected), 出现错误时，拒绝理由与promise永久绑定，可为任意值，包括undefined，一般情况下为Error对象</li>
</ul>
<p>pending 状态的 Promise 对象可能触发fulfilled 状态并传递一个值给相应的状态处理方法，也可能触发失败状态（rejected）并传递失败信息。当其中任一种情况出现时，Promise 对象的 then 方法绑定的处理方法（handlers ）就会被调用（then方法包含两个参数：onfulfilled 和 onrejected，它们都是 Function 类型。当Promise状态为fulfilled时，调用 then 的 onfulfilled 方法，当Promise状态为rejected时，调用 then 的 onrejected 方法， 所以在异步操作的完成和绑定处理方法之间不存在竞争）。</p>
<p>因为 Promise.prototype.then 和 Promise.prototype.catch 方法返回promise 对象， 所以它们可以被链式调用。</p>
<p>##构造函数<br>创建一个新的promise，初始化为等待状态，并提供解决函数的引用，用于改变其状态。<br>new Promise(executor);</p>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><h3 id="Promise-all-iterable"><a href="#Promise-all-iterable" class="headerlink" title="Promise.all(iterable)"></a>Promise.all(iterable)</h3><p>  这个方法返回一个新的promise对象，该promise对象在iterable参数对象里所有的promise对象都成功的时候才会触发成功，一旦有任何一个iterable里面的promise对象失败则立即触发该promise对象的失败。这个新的promise对象在触发成功状态以后，会把一个包含iterable里所有promise返回值的数组作为成功回调的返回值，顺序跟iterable的顺序保持一致；如果这个新的promise对象触发了失败状态，它会把iterable里第一个触发失败的promise对象的错误信息作为它的失败错误信息。Promise.all方法常被用于处理多个promise对象的状态集合。（可以参考jQuery.when方法—译者注）<br>  <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> p1 = <span class="built_in">Promise</span>.resolve(<span class="number">3</span>);</div><div class="line"><span class="keyword">var</span> p2 = <span class="number">1337</span>;</div><div class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">  setTimeout(resolve, <span class="number">100</span>, <span class="string">"foo"</span>);</div><div class="line">&#125;); </div><div class="line"></div><div class="line"><span class="built_in">Promise</span>.all([p1, p2, p3]).then(<span class="function"><span class="params">values</span> =&gt;</span> &#123; </div><div class="line">  <span class="built_in">console</span>.log(values); <span class="comment">// [3, 1337, "foo"] </span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="Promise-race-iterable"><a href="#Promise-race-iterable" class="headerlink" title="Promise.race(iterable)"></a>Promise.race(iterable)</h3><p>  当iterable参数里的任意一个子promise被成功或失败后，父promise马上也会用子promise的成功返回值或失败详情作为参数调用父promise绑定的相应句柄，并返回该promise对象。<br>  <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">ar p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123; </div><div class="line">    setTimeout(resolve, <span class="number">500</span>, <span class="string">"one"</span>); </div><div class="line">&#125;);</div><div class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123; </div><div class="line">    setTimeout(resolve, <span class="number">100</span>, <span class="string">"two"</span>); </div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">Promise</span>.race([p1, p2]).then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(value); <span class="comment">// "two"</span></div><div class="line">  <span class="comment">// 两个都完成，但 p2 更快</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123; </div><div class="line">    setTimeout(resolve, <span class="number">100</span>, <span class="string">"three"</span>);</div><div class="line">&#125;);</div><div class="line"><span class="keyword">var</span> p4 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123; </div><div class="line">    setTimeout(reject, <span class="number">500</span>, <span class="string">"four"</span>); </div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">Promise</span>.race([p3, p4]).then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(value); <span class="comment">// "three"</span></div><div class="line">  <span class="comment">// p3 更快，所以它完成了              </span></div><div class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">reason</span>) </span>&#123;</div><div class="line">  <span class="comment">// 未被调用</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="Promise-reject-reason"><a href="#Promise-reject-reason" class="headerlink" title="Promise.reject(reason)"></a>Promise.reject(reason)</h3><p>  返回一个状态为失败的Promise对象，并将给定的失败信息传递给对应的处理方法<br>  <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Promise</span>.reject(<span class="string">"Testing static reject"</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">reason</span>) </span>&#123;</div><div class="line">  <span class="comment">// 未被调用</span></div><div class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">reason</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(reason); <span class="comment">// "测试静态拒绝"</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"fail"</span>)).then(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</div><div class="line">  <span class="comment">// 未被调用</span></div><div class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(error); <span class="comment">// 堆栈跟踪</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="Promise-resolve-value"><a href="#Promise-resolve-value" class="headerlink" title="Promise.resolve(value)"></a>Promise.resolve(value)</h3><p>  返回一个状态由给定value决定的Promise对象。如果该值是一个Promise对象，则直接返回该对象；如果该值是thenable(即，带有then方法的对象)，返回的Promise对象的最终状态由then方法执行决定；否则的话(该value为空，基本类型或者不带then方法的对象),返回的Promise对象状态为fulfilled，并且将该value传递给对应的then方法。通常而言，如果你不知道一个值是否是Promise对象，使用Promise.resolve(value) 来返回一个Promise对象,这样就能将该value以Promise对象形式使用。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Resolve另一个promise对象</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> original = <span class="built_in">Promise</span>.resolve(<span class="literal">true</span>);</div><div class="line"><span class="keyword">var</span> cast = <span class="built_in">Promise</span>.resolve(original);</div><div class="line">cast.then(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(v); <span class="comment">// true</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// resolve thenable的对象们并抛出错误</span></div><div class="line"><span class="comment">// Resolve一个thenable对象</span></div><div class="line"><span class="keyword">var</span> p1 = <span class="built_in">Promise</span>.resolve(&#123; </div><div class="line">  <span class="attr">then</span>: <span class="function"><span class="keyword">function</span>(<span class="params">resolve, onReject</span>) </span>&#123; resolve(<span class="string">"resolve!"</span>); &#125;</div><div class="line">&#125;);</div><div class="line"><span class="built_in">console</span>.log(p1 <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) <span class="comment">// true, 这是一个Promise对象</span></div><div class="line"></div><div class="line">p1.then(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(v); <span class="comment">// 输出"resolve!"</span></div><div class="line">  &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="comment">// 不会被调用</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Thenable在callback之前抛出异常</span></div><div class="line"><span class="comment">// Promise rejects</span></div><div class="line"><span class="keyword">var</span> thenable = &#123; <span class="attr">then</span>: <span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</div><div class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Throwing"</span>);</div><div class="line">  resolve(<span class="string">"Resolving"</span>);</div><div class="line">&#125;&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p2 = <span class="built_in">Promise</span>.resolve(thenable);</div><div class="line">p2.then(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</div><div class="line">  <span class="comment">// 不会被调用</span></div><div class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(e); <span class="comment">// TypeError: Throwing</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Thenable在callback之后抛出异常</span></div><div class="line"><span class="comment">// Promise resolves</span></div><div class="line"><span class="keyword">var</span> thenable = &#123; <span class="attr">then</span>: <span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</div><div class="line">  resolve(<span class="string">"Resolving"</span>);</div><div class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Throwing"</span>);</div><div class="line">&#125;&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p3 = <span class="built_in">Promise</span>.resolve(thenable);</div><div class="line">p3.then(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(v); <span class="comment">// 输出"Resolving"</span></div><div class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">  <span class="comment">// 不会被调用</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="Promise-原型"><a href="#Promise-原型" class="headerlink" title="Promise 原型"></a>Promise 原型</h2><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><ul>
<li><p>Promise.prototype.constructor</p>
<p>返回创建了实例原型的函数.  默认为 Promise 函数.</p>
<h3 id="方法-1"><a href="#方法-1" class="headerlink" title="方法"></a>方法</h3><ul>
<li>Promise.prototype.catch(onRejected)</li>
</ul>
<p>添 p2 = Promise.resolve(thenable);<br>p2.then(function(v) {<br>// 不会被调用<br>}, function(e) {<br>console.log(e); // TypeError: Throwing<br>});</p>
</li>
</ul>
<p>// Thenable在callback之后抛出异常<br>// Promise resolves<br>var thenable = { then: function(resolve) {<br>  resolve(“Resolving”);<br>  throw new TypeError(“Throwing”);<br>}};</p>
<p>var p3 = Promise.resolve(thenable);<br>p3.then(function(v) {<br>  console.log(v); // 输出”Resolving”<br>}, function(e) {<br>  // 不会被调用<br>});<br><figure class="highlight plain"><figcaption><span>回调到当前 promise, 返回一个新的promise。如果这个回调被调用，新 promise 将以它的返回值来resolve，否则如果当前promise 进入fulfilled状态，则以当前promise的肯定结果作为新promise的肯定结果.</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- Promise.prototype.then(onFulfilled, onRejected)</div><div class="line"></div><div class="line">添加肯定和否定回调到当前 promise, 返回一个新的 promise, 将以回调的返回值 来resolve.</div><div class="line"></div><div class="line">## 示例</div><div class="line">```js</div><div class="line">var myFirstPromise = new Promise(function(resolve, reject)&#123;</div><div class="line">    //当异步代码执行成功时，我们才会调用resolve(...), 当异步代码失败时就会调用reject(...)</div><div class="line">    //在本例中，我们使用setTimeout(...)来模拟异步代码，实际编码时可能是XHR请求或是HTML5的一些API方法.</div><div class="line">    setTimeout(function()&#123;</div><div class="line">        resolve(&quot;成功!&quot;); //代码正常执行！</div><div class="line">    &#125;, 250);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">myFirstPromise.then(function(successMessage)&#123;</div><div class="line">    //successMessage的值是上面调用resolve(...)方法传入的值.</div><div class="line">    //successMessage参数不一定非要是字符串类型，这里只是举个例子</div><div class="line">    console.log(&quot;Yay! &quot; + successMessage);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="external">mdn</a></li>
<li><a href="http://javascript.ruanyifeng.com/" target="_blank" rel="external">JavaScript 标准参考教程</a></li>
<li>[JavaScript Promise](<a href="https://developers.google.com/web/fundamentals/getting-started/primers/promises?hl=zh-cn" target="_blank" rel="external">https://developers.google.com/web/fundamentals/getting-started/primers/promises?hl=zh-cn</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://mdn.mozillademos.org/files/8633/promises.png&quot; alt=&quot;promise&quot;&gt;&lt;br&gt;Promise 对象用于一个异步操作的最终完成（或失败）及其结果值的表示。(简单点说就是处理异步请求。。我们经
    
    </summary>
    
      <category term="javascript" scheme="https://zhangbihua.github.io/categories/javascript/"/>
    
      <category term="MDN" scheme="https://zhangbihua.github.io/categories/javascript/MDN/"/>
    
    
      <category term="Promise" scheme="https://zhangbihua.github.io/tags/Promise/"/>
    
  </entry>
  
  <entry>
    <title>class</title>
    <link href="https://zhangbihua.github.io/2017/07/13/Class/"/>
    <id>https://zhangbihua.github.io/2017/07/13/Class/</id>
    <published>2017-07-13T02:33:42.000Z</published>
    <updated>2017-07-13T06:04:00.140Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ECMAScript 2015 中引入的 JavaScript <strong>class</strong> 主要是 JavaScript 现有的基于原型的继承的语法糖。 类语法不是向JavaScript引入一个新的面向对象的继承模型。JavaScript类提供了一个更简单和更清晰的语法来创建对象并处理继承。</p>
</blockquote>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>类实际上是个“特殊的函数”，就像你能够定义的函数表达式和函数声明一样，类语法有两个组成部分：类表达式和类声明。</p>
<h3 id="类声明"><a href="#类声明" class="headerlink" title="类声明"></a>类声明</h3><p>定义一个类的一种方法是使用一个类声明。要声明一个类，你可以使用带有class关键字的类名（这里是“Rectangle”）。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(height, width) &#123;</div><div class="line">    <span class="keyword">this</span>.height = height;</div><div class="line">    <span class="keyword">this</span>.width = width;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="提升"><a href="#提升" class="headerlink" title="提升"></a>提升</h4><p>函数声明和类声明之间的一个重要区别是函数声明会声明提升，类声明不会。你首先需要声明你的类，然后访问它，<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> Rectangle(); </div><div class="line"></div><div class="line"><span class="comment">// ReferenceError</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;&#125;</div></pre></td></tr></table></figure></p>
<h3 id="类表达式"><a href="#类表达式" class="headerlink" title="类表达式"></a>类表达式</h3><p>一个类表达式是定义一个类的另一种方式。类表达式可以是被命名的或匿名的。赋予一个命名类表达式的名称是类的主体的本地名称。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* 匿名类 */</span> </div><div class="line"><span class="keyword">let</span> Rectangle = <span class="class"><span class="keyword">class</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(height, width) &#123;</div><div class="line">    <span class="keyword">this</span>.height = height;</div><div class="line">    <span class="keyword">this</span>.width = width;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">/* 命名的类 */</span> </div><div class="line"><span class="keyword">let</span> Rectangle = <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(height, width) &#123;</div><div class="line">    <span class="keyword">this</span>.height = height;</div><div class="line">    <span class="keyword">this</span>.width = width;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2 id="类体和方法定义"><a href="#类体和方法定义" class="headerlink" title="类体和方法定义"></a>类体和方法定义</h2><p>一个类的类体是一对花括号/大括号 {} 中的部分。这是你定义类成员的位置，如方法或构造函数。</p>
<h3 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h3><p>类声明和类表达式的主体都执行在严格模式下。</p>
<h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/constructor" target="_blank" rel="external">构造函数</a>方法是一个特殊的方法，其用于创建和初始化使用一个类创建的一个对象。一个类只能拥有一个名为 “constructor”的特殊方法。如果类包含多个构造函数的方法，则将抛出 一个SyntaxError 。</p>
<p>一个构造函数可以使用 super 关键字来调用一个父类的构造函数。</p>
<h3 id="原型方法"><a href="#原型方法" class="headerlink" title="原型方法"></a>原型方法</h3><h3 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h3><p>static 关键字用来定义一个类的一个静态方法。调用静态方法而不实例化其类，不能通过一个类实例调用静态方法。静态方法通常用于为一个应用程序创建工具函数。</p>
<h2 id="使用-extends-创建子类"><a href="#使用-extends-创建子类" class="headerlink" title="使用 extends 创建子类"></a>使用 extends 创建子类</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/extends" target="_blank" rel="external">extends</a> 关键字在类声明或类表达式中用于创建一个类作为另一个类的一个子类。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123; </div><div class="line">  <span class="keyword">constructor</span>(name) &#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  speak() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' makes a noise.'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">  speak() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' barks.'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> Dog(<span class="string">'Mitzie'</span>);</div><div class="line"><span class="comment">// 'Mitzie barks.'</span></div><div class="line">d.speak();</div></pre></td></tr></table></figure></p>
<p>如果子类中存在构造函数，则需要在使用“this”之前首先调用super（）。<br>也可以扩展传统的基于函数的“类”：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name;  </div><div class="line">&#125;</div><div class="line">Animal.prototype.speak = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' makes a noise.'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">  speak() &#123;</div><div class="line">    <span class="keyword">super</span>.speak();</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' barks.'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> Dog(<span class="string">'Mitzie'</span>);</div><div class="line">d.speak();</div></pre></td></tr></table></figure>
<p>请注意，类不能扩展常规（不可构造/非构造的）对象。如果要继承常规对象，可以改用<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf" target="_blank" rel="external">Object.setPrototypeOf()</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> Animal = &#123;</div><div class="line">  speak() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' makes a noise.'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(name) &#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">  &#125;</div><div class="line">  speak() &#123;</div><div class="line">    <span class="keyword">super</span>.speak();</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' barks.'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">Object</span>.setPrototypeOf(Dog.prototype, Animal);</div><div class="line"></div><div class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> Dog(<span class="string">'Mitzie'</span>);</div><div class="line">d.speak();</div></pre></td></tr></table></figure></p>
<h2 id="Species"><a href="#Species" class="headerlink" title="Species"></a>Species</h2><p>你可能希望在派生数组类 MyArray 中返回 Array对象。这种类/种类模式允许你覆盖默认的构造函数。</p>
<p>例如，当使用像map()返回默认构造函数的方法时，您希望这些方法返回一个父Array对象，而不是MyArray对象。Symbol.species 符号可以让你这样做：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</div><div class="line">  <span class="comment">// Overwrite species to the parent Array constructor</span></div><div class="line">  <span class="keyword">static</span> get [<span class="built_in">Symbol</span>.species]() &#123; <span class="keyword">return</span> <span class="built_in">Array</span>; &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> MyArray(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</div><div class="line"><span class="keyword">var</span> mapped = a.map(<span class="function"><span class="params">x</span> =&gt;</span> x * x);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(mapped <span class="keyword">instanceof</span> MyArray); </div><div class="line"><span class="comment">// false</span></div><div class="line"><span class="built_in">console</span>.log(mapped <span class="keyword">instanceof</span> <span class="built_in">Array</span>);   </div><div class="line"><span class="comment">// true</span></div></pre></td></tr></table></figure></p>
<h2 id="使用-super-调用超类"><a href="#使用-super-调用超类" class="headerlink" title="使用 super 调用超类"></a>使用 super 调用超类</h2><p>super 关键字用于调用对象的父对象上的函数。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123; </div><div class="line">  <span class="keyword">constructor</span>(name) &#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  speak() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' makes a noise.'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lion</span> <span class="keyword">extends</span> <span class="title">Cat</span> </span>&#123;</div><div class="line">  speak() &#123;</div><div class="line">    <span class="keyword">super</span>.speak();</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' roars.'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Mix-ins-混合"><a href="#Mix-ins-混合" class="headerlink" title="Mix-ins 混合"></a>Mix-ins 混合</h2><p>抽象子类或者 mix-ins 是类的模板。 一个 ECMAScript 类只能有一个单超类，所以想要从工具类来多重继承的行为是不可能的。子类继承的只能是父类提供的功能性。因此，例如，从工具类的多重继承是不可能的。该功能必须由超类提供。</p>
<p>一个以超类作为输入的函数和一个继承该超类的子类作为输出可以用于在ECMAScript中实现混合<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> calculatorMixin = <span class="function"><span class="params">Base</span> =&gt;</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123;</div><div class="line">  calc() &#123; &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> randomizerMixin = <span class="function"><span class="params">Base</span> =&gt;</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123;</div><div class="line">  randomize() &#123; &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>使用 mix-ins 的类可以像下面这样写：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">使用 mix-ins 的类可以像下面这样写：</div></pre></td></tr></table></figure></p>
<h2 id="example运用class-super-static-extend…"><a href="#example运用class-super-static-extend…" class="headerlink" title="example运用class super, static extend…"></a><a href="https://googlechrome.github.io/samples/classes-es6/index.html" target="_blank" rel="external">example</a>运用class super, static extend…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Example 1: Creating a new class (declaration-form)</span></div><div class="line"><span class="comment">// ===============================================================</span></div><div class="line"></div><div class="line"><span class="comment">// A base class is defined using the new reserved 'class' keyword</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Polygon</span> </span>&#123;</div><div class="line">  <span class="comment">// ..and an (optional) custom class constructor. If one is</span></div><div class="line">  <span class="comment">// not supplied, a default constructor is used instead:</span></div><div class="line">  <span class="comment">// constructor() &#123; &#125;</span></div><div class="line">  <span class="keyword">constructor</span>(height, width) &#123;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'Polygon'</span>;</div><div class="line">    <span class="keyword">this</span>.height = height;</div><div class="line">    <span class="keyword">this</span>.width = width;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// Simple class instance methods using short-hand method</span></div><div class="line">  <span class="comment">// declaration</span></div><div class="line">  sayName() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Hi, I am a '</span>, <span class="keyword">this</span>.name + <span class="string">'.'</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  sayHistory() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'"Polygon" is derived from the Greek polus (many) '</span> +</div><div class="line">      <span class="string">'and gonia (angle).'</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// We will look at static and subclassed methods shortly</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Classes are used just like ES5 constructor functions:</span></div><div class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> Polygon(<span class="number">300</span>, <span class="number">400</span>);</div><div class="line">p.sayName();</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'The width of this polygon is '</span> + p.width);</div><div class="line"></div><div class="line"><span class="comment">// Example 2: Creating a new class (expression-form)</span></div><div class="line"><span class="comment">// ===============================================================</span></div><div class="line"></div><div class="line"><span class="comment">// Our Polygon class above is an example of a Class declaration.</span></div><div class="line"><span class="comment">// ES6 classes also support Class expressions - just another way</span></div><div class="line"><span class="comment">// of defining a new class. For example:</span></div><div class="line"><span class="keyword">const</span> MyPoly = <span class="class"><span class="keyword">class</span> <span class="title">Poly</span> </span>&#123;</div><div class="line">  getPolyName() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Hi. I was created with a Class expression. My name is '</span> +</div><div class="line">      Poly.name);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">let</span> inst = <span class="keyword">new</span> MyPoly();</div><div class="line">inst.getPolyName();</div><div class="line"></div><div class="line"><span class="comment">// Example 3: Extending an existing class</span></div><div class="line"><span class="comment">// ===============================================================</span></div><div class="line"></div><div class="line"><span class="comment">// Classes support extending other classes, but can also extend</span></div><div class="line"><span class="comment">// other objects. Whatever you extend must be a constructor.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Let's extend the Polygon class to create a new derived class</span></div><div class="line"><span class="comment">// called Square.</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Polygon</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(length) &#123;</div><div class="line">    <span class="comment">// The reserved 'super' keyword is for making super-constructor</span></div><div class="line">    <span class="comment">// calls and allows access to parent methods.</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">// Here, it will call the parent class' constructor with lengths</span></div><div class="line">    <span class="comment">// provided for the Polygon's width and height</span></div><div class="line">    <span class="keyword">super</span>(length, length);</div><div class="line">    <span class="comment">// Note: In derived classes, super() must be called before you</span></div><div class="line">    <span class="comment">// can use 'this'. Leaving this out will cause a reference error.</span></div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'Square'</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// Getter/setter methods are supported in classes,</span></div><div class="line">  <span class="comment">// similar to their ES5 equivalents</span></div><div class="line">  get area() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.height * <span class="keyword">this</span>.width;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  set area(value) &#123;</div><div class="line">    <span class="keyword">this</span>.area = value;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> Square(<span class="number">5</span>);</div><div class="line"></div><div class="line">s.sayName();</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'The area of this square is '</span> + s.area);</div><div class="line"></div><div class="line"><span class="comment">// Example 4: Subclassing methods of a parent class</span></div><div class="line"><span class="comment">// ===============================================================</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">extends</span> <span class="title">Polygon</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(height, width) &#123;</div><div class="line">    <span class="keyword">super</span>(height, width);</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'Rectangle'</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// Here, sayName() is a subclassed method which</span></div><div class="line">  <span class="comment">// overrides their superclass method of the same name.</span></div><div class="line">  sayName() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Sup! My name is '</span>, <span class="keyword">this</span>.name + <span class="string">'.'</span>);</div><div class="line">    <span class="keyword">super</span>.sayHistory();</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> r = <span class="keyword">new</span> Rectangle(<span class="number">50</span>, <span class="number">60</span>);</div><div class="line">r.sayName();</div><div class="line"></div><div class="line"><span class="comment">// Example 5: Defining static methods</span></div><div class="line"><span class="comment">// ===============================================================</span></div><div class="line"></div><div class="line"><span class="comment">// Classes support static members which can be accessed without an</span></div><div class="line"><span class="comment">// instance being present.</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Triple</span> </span>&#123;</div><div class="line">  <span class="comment">// Using the 'static' keyword creates a method which is associated</span></div><div class="line">  <span class="comment">// with a class, but not with an instance of the class.</span></div><div class="line">  <span class="keyword">static</span> triple(n) &#123;</div><div class="line">    n = n || <span class="number">1</span>;</div><div class="line">    <span class="keyword">return</span> n * <span class="number">3</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// super.prop in this example is used for accessing super-properties from</span></div><div class="line"><span class="comment">// a parent class. This works fine in static methods too:</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BiggerTriple</span> <span class="keyword">extends</span> <span class="title">Triple</span> </span>&#123;</div><div class="line">  <span class="keyword">static</span> triple(n) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.triple(n) * <span class="keyword">super</span>.triple(n);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(Triple.triple());</div><div class="line"><span class="built_in">console</span>.log(Triple.triple(<span class="number">6</span>));</div><div class="line"><span class="built_in">console</span>.log(BiggerTriple.triple(<span class="number">3</span>));</div><div class="line"><span class="comment">// var tp = new Triple();</span></div><div class="line"><span class="comment">// console.log(tp.triple()); tp.triple is not a function</span></div><div class="line"></div><div class="line"><span class="comment">// Example 6: Subclassing built-in classes and DOM</span></div><div class="line"><span class="comment">// ===============================================================</span></div><div class="line"></div><div class="line"><span class="comment">// Extend Date built-in</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDate</span> <span class="keyword">extends</span> <span class="title">Date</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">super</span>();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getFormattedDate() &#123;</div><div class="line">    <span class="keyword">var</span> months = [<span class="string">'Jan'</span>, <span class="string">'Feb'</span>, <span class="string">'Mar'</span>, <span class="string">'Apr'</span>, <span class="string">'May'</span>, <span class="string">'Jun'</span>, <span class="string">'Jul'</span>, <span class="string">'Aug'</span>, <span class="string">'Sep'</span>,</div><div class="line">      <span class="string">'Oct'</span>, <span class="string">'Nov'</span>, <span class="string">'Dec'</span>];</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.getDate() + <span class="string">'-'</span> + months[<span class="keyword">this</span>.getMonth()] + <span class="string">'-'</span> +</div><div class="line">      <span class="keyword">this</span>.getFullYear();</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> aDate = <span class="keyword">new</span> MyDate();</div><div class="line"><span class="built_in">console</span>.log(aDate.getTime());</div><div class="line"><span class="built_in">console</span>.log(aDate.getFormattedDate());</div><div class="line"></div><div class="line"><span class="comment">// Extend Uint8Array</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExtendedUint8Array</span> <span class="keyword">extends</span> <span class="title">Uint8Array</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">super</span>(<span class="number">10</span>);</div><div class="line">    <span class="keyword">this</span>[<span class="number">0</span>] = <span class="number">255</span>;</div><div class="line">    <span class="keyword">this</span>[<span class="number">1</span>] = <span class="number">0xFFA</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> eua = <span class="keyword">new</span> ExtendedUint8Array();</div><div class="line"><span class="built_in">console</span>.log(eua.byteLength);</div><div class="line"></div><div class="line"><span class="comment">// Extend DOM Audio element</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyAudio</span> <span class="keyword">extends</span> <span class="title">Audio</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">super</span>();</div><div class="line">    <span class="keyword">this</span>._lyrics = <span class="string">''</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  get lyrics() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._lyrics;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  set lyrics(str) &#123;</div><div class="line">    <span class="keyword">this</span>._lyrics = str;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> player = <span class="keyword">new</span> MyAudio();</div><div class="line">player.controls = <span class="literal">true</span>;</div><div class="line">player.lyrics = <span class="string">'Never gonna give you up'</span>;</div><div class="line"><span class="built_in">document</span>.querySelector(<span class="string">'body'</span>).appendChild(player);</div><div class="line"><span class="built_in">console</span>.log(player.lyrics);</div><div class="line"></div><div class="line"><span class="comment">// Note: The V8 in Chrome 42 supports subclassing built-ins but Arrays.</span></div><div class="line"><span class="comment">// Subclassing arrays supported in Chrome 43.</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">super</span>();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  top() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>[<span class="keyword">this</span>.length - <span class="number">1</span>];</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> stack = <span class="keyword">new</span> Stack();</div><div class="line">stack.push(<span class="string">'world'</span>);</div><div class="line">stack.push(<span class="string">'hello'</span>);</div><div class="line"><span class="built_in">console</span>.log(stack.top());</div><div class="line"><span class="built_in">console</span>.log(stack.length);</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ECMAScript 2015 中引入的 JavaScript &lt;strong&gt;class&lt;/strong&gt; 主要是 JavaScript 现有的基于原型的继承的语法糖。 类语法不是向JavaScript引入一个新的面向对象的继承模型。JavaSc
    
    </summary>
    
      <category term="javascript" scheme="https://zhangbihua.github.io/categories/javascript/"/>
    
      <category term="MDN" scheme="https://zhangbihua.github.io/categories/javascript/MDN/"/>
    
    
      <category term="class" scheme="https://zhangbihua.github.io/tags/class/"/>
    
  </entry>
  
  <entry>
    <title>解构赋值</title>
    <link href="https://zhangbihua.github.io/2017/07/09/DestructuringAssignment/"/>
    <id>https://zhangbihua.github.io/2017/07/09/DestructuringAssignment/</id>
    <published>2017-07-09T05:08:27.000Z</published>
    <updated>2017-07-13T04:01:30.305Z</updated>
    
    <content type="html"><![CDATA[<h2 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="external">解构赋值</a></h2><blockquote>
<p>解构赋值 语法是一个Javascript表达式，这使得可以将值从数组或属性从对象提取到不同的变量中。</p>
</blockquote>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><ul>
<li><p>交换变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"><span class="keyword">var</span> b = <span class="number">3</span>;</div><div class="line"></div><div class="line">[a, b] = [b, a];</div><div class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 3</span></div><div class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 1</span></div></pre></td></tr></table></figure>
</li>
<li><p>解构数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">let</span> a, b, rest;</div><div class="line"></div><div class="line"><span class="comment">/* array 解构赋值 */</span></div><div class="line">[a, b] = [<span class="number">1</span>, <span class="number">2</span>];</div><div class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></div><div class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 2</span></div><div class="line"></div><div class="line">[a, b, ...rest] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></div><div class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 2</span></div><div class="line"><span class="built_in">console</span>.log(rest); <span class="comment">// [3, 4, 5]</span></div><div class="line"></div><div class="line"><span class="comment">/* object 解构赋值 */</span></div><div class="line">(&#123;a, b&#125; = &#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>&#125;);</div><div class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></div><div class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 2</span></div></pre></td></tr></table></figure>
</li>
<li><p>解构对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> o = &#123;<span class="attr">p</span>: <span class="number">42</span>, <span class="attr">q</span>: <span class="literal">true</span>&#125;;</div><div class="line"><span class="keyword">var</span> &#123;p, q&#125; = o;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(p); <span class="comment">// 42</span></div><div class="line"><span class="built_in">console</span>.log(q); <span class="comment">// true </span></div><div class="line"></div><div class="line"><span class="comment">// 用新变量名赋值</span></div><div class="line"><span class="keyword">var</span> &#123;<span class="attr">p</span>: foo, <span class="attr">q</span>: bar&#125; = o;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(foo); <span class="comment">// 42</span></div><div class="line"><span class="built_in">console</span>.log(bar); <span class="comment">// true</span></div></pre></td></tr></table></figure>
</li>
<li><p>解析一个从函数返回的数组(函数现在可以返回多个值了)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> [<span class="number">1</span>, <span class="number">2</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> a, b; </div><div class="line">[a, b] = f(); </div><div class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></div><div class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 2</span></div></pre></td></tr></table></figure>
</li>
<li><p>忽略某些返回值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> [a, , b] = f();</div><div class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></div><div class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 3</span></div></pre></td></tr></table></figure>
</li>
<li><p>将剩余数组赋值给一个变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> [a, ...b] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></div><div class="line"><span class="built_in">console</span>.log(b); <span class="comment">// [2, 3]</span></div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>用正则表达式匹配提取值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> url = <span class="string">"https://developer.mozilla.org/en-US/Web/JavaScript"</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> parsedURL = <span class="regexp">/^(\w+)\:\/\/([^\/]+)\/(.*)$/</span>.exec(url);</div><div class="line"><span class="built_in">console</span>.log(parsedURL); <span class="comment">// ["https://developer.mozilla.org/en-US/Web/JavaScript", "https", "developer.mozilla.org", "en-US/Web/JavaScript"]</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> [, protocol, fullhost, fullpath] = parsedURL;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(protocol); <span class="comment">// "https"</span></div></pre></td></tr></table></figure>
</li>
<li><p>函数参数默认值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawES6Chart</span>(<span class="params">&#123;size = <span class="string">'big'</span>, cords = &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;, radius = <span class="number">25</span>&#125; = &#123;&#125;</span>) </span></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(size, cords, radius);</div><div class="line">  <span class="comment">// do some chart drawing</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">drawES6Chart(&#123;</div><div class="line">  <span class="attr">cords</span>: &#123; <span class="attr">x</span>: <span class="number">18</span>, <span class="attr">y</span>: <span class="number">30</span> &#125;,</div><div class="line">  <span class="attr">radius</span>: <span class="number">30</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>加载模块</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; Loader, main &#125; = <span class="built_in">require</span>(<span class="string">'toolkit/loader'</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>解构嵌套对象和数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> metadata = &#123;</div><div class="line">    <span class="attr">title</span>: <span class="string">"Scratchpad"</span>,</div><div class="line">    <span class="attr">translations</span>: [</div><div class="line">       &#123;</div><div class="line">        <span class="attr">locale</span>: <span class="string">"de"</span>,</div><div class="line">        <span class="attr">localization_tags</span>: [ ],</div><div class="line">        <span class="attr">last_edit</span>: <span class="string">"2014-04-14T08:43:37"</span>,</div><div class="line">        <span class="attr">url</span>: <span class="string">"/de/docs/Tools/Scratchpad"</span>,</div><div class="line">        <span class="attr">title</span>: <span class="string">"JavaScript-Umgebung"</span></div><div class="line">       &#125;</div><div class="line">    ],</div><div class="line">    <span class="attr">url</span>: <span class="string">"/en-US/docs/Tools/Scratchpad"</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> &#123; <span class="attr">title</span>: englishTitle, <span class="attr">translations</span>: [&#123; <span class="attr">title</span>: localeTitle &#125;] &#125; = metadata;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(englishTitle); <span class="comment">// "Scratchpad"</span></div><div class="line"><span class="built_in">console</span>.log(localeTitle);  <span class="comment">// "JavaScript-Umgebung"</span></div></pre></td></tr></table></figure>
</li>
<li><p>For of 迭代和解构</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> people = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">"Mike Smith"</span>,</div><div class="line">    <span class="attr">family</span>: &#123;</div><div class="line">      <span class="attr">mother</span>: <span class="string">"Jane Smith"</span>,</div><div class="line">      <span class="attr">father</span>: <span class="string">"Harry Smith"</span>,</div><div class="line">      <span class="attr">sister</span>: <span class="string">"Samantha Smith"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">age</span>: <span class="number">35</span></div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">"Tom Jones"</span>,</div><div class="line">    <span class="attr">family</span>: &#123;</div><div class="line">      <span class="attr">mother</span>: <span class="string">"Norah Jones"</span>,</div><div class="line">      <span class="attr">father</span>: <span class="string">"Richard Jones"</span>,</div><div class="line">      <span class="attr">brother</span>: <span class="string">"Howard Jones"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">age</span>: <span class="number">25</span></div><div class="line">  &#125;</div><div class="line">];</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> &#123;<span class="attr">name</span>: n, <span class="attr">family</span>: &#123; <span class="attr">father</span>: f &#125; &#125; <span class="keyword">of</span> people) &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"Name: "</span> + n + <span class="string">", Father: "</span> + f);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// "Name: Mike Smith, Father: Harry Smith"</span></div><div class="line"><span class="comment">// "Name: Tom Jones, Father: Richard Jones"</span></div></pre></td></tr></table></figure>
</li>
<li><p>从作为函数实参的对象中提取数据、</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">userId</span>(<span class="params">&#123;id&#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> id;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">whois</span>(<span class="params">&#123;displayName: displayName, fullName: &#123;firstName: name&#125;&#125;</span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(displayName + <span class="string">" is "</span> + name);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> user = &#123; </div><div class="line">  <span class="attr">id</span>: <span class="number">42</span>, </div><div class="line">  <span class="attr">displayName</span>: <span class="string">"jdoe"</span>,</div><div class="line">  <span class="attr">fullName</span>: &#123; </div><div class="line">      <span class="attr">firstName</span>: <span class="string">"John"</span>,</div><div class="line">      <span class="attr">lastName</span>: <span class="string">"Doe"</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">"userId: "</span> + userId(user)); <span class="comment">// "userId: 42"</span></div><div class="line">whois(user); <span class="comment">// "jdoe is John"</span></div></pre></td></tr></table></figure>
</li>
<li><p>对象属性计算名和解构</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> key = <span class="string">"z"</span>;</div><div class="line"><span class="keyword">let</span> &#123; [key]: foo &#125; = &#123; <span class="attr">z</span>: <span class="string">"bar"</span> &#125;;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(foo); <span class="comment">// "bar</span></div></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;解构赋值&quot;&gt;&lt;a href=&quot;#解构赋值&quot; class=&quot;headerlink&quot; title=&quot;解构赋值&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference
    
    </summary>
    
      <category term="javascript" scheme="https://zhangbihua.github.io/categories/javascript/"/>
    
      <category term="MDN" scheme="https://zhangbihua.github.io/categories/javascript/MDN/"/>
    
    
      <category term="解构赋值" scheme="https://zhangbihua.github.io/tags/%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/"/>
    
  </entry>
  
  <entry>
    <title>生成器(Generator)</title>
    <link href="https://zhangbihua.github.io/2017/07/09/generatorAndIterator/"/>
    <id>https://zhangbihua.github.io/2017/07/09/generatorAndIterator/</id>
    <published>2017-07-09T05:08:27.000Z</published>
    <updated>2017-07-13T16:09:49.648Z</updated>
    
    <content type="html"><![CDATA[<h2 id="生成器对象"><a href="#生成器对象" class="headerlink" title="生成器对象"></a>生成器对象</h2><p>生成器对象是由一个 generator function 返回的,并且它符合可迭代协议和迭代器协议。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123; </div><div class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</div><div class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</div><div class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> g = gen(); </div><div class="line"><span class="string">``</span><span class="string">` </span></div><div class="line">### 方法</div><div class="line">- Generator.prototype.next() </div><div class="line"></div><div class="line">  返回一个由 yield表达式生成的值。</div><div class="line">- Generator.prototype.return()</div><div class="line"></div><div class="line">  返回给定的值并结束生成器。</div><div class="line">- Generator.prototype.throw()</div><div class="line">  向生成器抛出一个错误。</div><div class="line"></div><div class="line">## function * </div><div class="line">function* 这种声明方式(function关键字后跟一个星号）会定义一个生成器函数 (generator function)，它返回一个  Generator  对象。</div><div class="line">### 语法</div><div class="line">function* name([param[, param[, ... param]]]) &#123; statements &#125;</div><div class="line"></div><div class="line">### 描述</div><div class="line">生成器函数在执行时能中途退出，后面又能重新进入继续执行。而且在函数内定义的变量的状态都会保留，不受中途退出的影响。</div><div class="line"></div><div class="line">调用一个生成器函数并不会马上执行它里面的语句，而是返回一个这个生成器的迭代器（iterator）对象。当这个迭代器的 next() 方法被首次（后续）调用时，其内的语句会执行到第一个（后续）出现yield表达式的位置为止，该表达式定义了迭代器要返回的值，或者被 yield*委派至另一个生成器函数。next()方法返回一个对象，这个对象包含两个属性：value 和 done，value 属性表示本次 yield 表达式的返回值，done 属性为布尔类型，表示生成器是否已经产出了它最后的值，即生成器函数是否已经返回。</div><div class="line"></div><div class="line">调用 next() 方法时，如果传入了参数，那么这个参数会取代生成器函数中对应执行位置的 yield 表达式（整个表达式被这个值替换）</div><div class="line"></div><div class="line">当在生成器函数中显式 return 时，会导致生成器立即变为完成状态，即调用 next() 方法返回的对象的 done 为 true。如果 return 了一个值，那么这个值会作为下次调用 next() 方法返回的 value 值。</div><div class="line"></div><div class="line">### 示例</div><div class="line">#### 简单示例</div><div class="line">`<span class="string">``</span>js</div><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">idMaker</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> index = <span class="number">0</span>;</div><div class="line">  <span class="keyword">while</span>(index&lt;<span class="number">3</span>)</div><div class="line">    <span class="keyword">yield</span> index++;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> gen = idMaker();</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// 0</span></div><div class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// 1</span></div><div class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// 2</span></div><div class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// undefined</span></div><div class="line"><span class="comment">// ...</span></div></pre></td></tr></table></figure>
<h4 id="yield-的示例"><a href="#yield-的示例" class="headerlink" title="yield*的示例"></a>yield*的示例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">anotherGenerator</span>(<span class="params">i</span>) </span>&#123;</div><div class="line">  <span class="keyword">yield</span> i + <span class="number">1</span>;</div><div class="line">  <span class="keyword">yield</span> i + <span class="number">2</span>;</div><div class="line">  <span class="keyword">yield</span> i + <span class="number">3</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params">i</span>)</span>&#123;</div><div class="line">  <span class="keyword">yield</span> i;</div><div class="line">  <span class="keyword">yield</span>* anotherGenerator(i);</div><div class="line">  <span class="keyword">yield</span> i + <span class="number">10</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> gen = generator(<span class="number">10</span>);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// 10</span></div><div class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// 11</span></div><div class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// 12</span></div><div class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// 13</span></div><div class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// 20</span></div></pre></td></tr></table></figure>
<h4 id="传递参数"><a href="#传递参数" class="headerlink" title="传递参数"></a>传递参数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">logGenerator</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">yield</span>);<span class="comment">//首次执行的中断处</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">yield</span>);</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">yield</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> gen = logGenerator();</div><div class="line"></div><div class="line"><span class="comment">// 首次调用 next() 会执行到第一个 yield 语句处</span></div><div class="line">gen.next(); </div><div class="line">gen.next(<span class="string">'pretzel'</span>); <span class="comment">// pretzel</span></div><div class="line">gen.next(<span class="string">'california'</span>); <span class="comment">// california</span></div><div class="line">gen.next(<span class="string">'mayonnaise'</span>); <span class="comment">// mayonnaise</span></div></pre></td></tr></table></figure>
<h4 id="显式返回"><a href="#显式返回" class="headerlink" title="显式返回"></a>显式返回</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">yieldAndReturn</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">yield</span> <span class="string">"Y"</span>;</div><div class="line">  <span class="keyword">return</span> <span class="string">"R"</span>;<span class="comment">//显式返回处</span></div><div class="line">  <span class="keyword">yield</span> <span class="string">"unreachable"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> gen = yieldAndReturn()</div><div class="line"><span class="built_in">console</span>.log(gen.next()); <span class="comment">// &#123; value: "Y", done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(gen.next()); <span class="comment">// &#123; value: "R", done: true &#125;</span></div><div class="line"><span class="built_in">console</span>.log(gen.next()); <span class="comment">// &#123; value: undefined, done: true &#125;</span></div></pre></td></tr></table></figure>
<h4 id="生成器函数不能当构造器使用"><a href="#生成器函数不能当构造器使用" class="headerlink" title="生成器函数不能当构造器使用"></a>生成器函数不能当构造器使用</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> f; <span class="comment">// throws "TypeError: f is not a constructor"</span></div></pre></td></tr></table></figure>
<h2 id="yield-expression-用于委托给另一个generator-或可迭代对象。"><a href="#yield-expression-用于委托给另一个generator-或可迭代对象。" class="headerlink" title="yield* expression 用于委托给另一个generator 或可迭代对象。"></a>yield* expression 用于委托给另一个generator 或可迭代对象。</h2><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><p>yield* [[expression]];</p>
<h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>yield * 表达式迭代操作数，并yield 它返回的每个值。</p>
<p>yield * 表达式本身的值是当迭代器关闭时返回的值(即，当done时为true)。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>例子：委托给其他生成器</p>
<p>以下代码中，g1() yield 出去的每个值都会在 g2() 的 next() 方法中返回，就像那些 yield 语句是写在 g2() 里一样。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">g1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</div><div class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</div><div class="line">  <span class="keyword">yield</span> <span class="number">4</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">g2</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</div><div class="line">  <span class="keyword">yield</span>* g1();</div><div class="line">  <span class="keyword">yield</span> <span class="number">5</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> iterator = g2();</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; value: 1, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; value: 2, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; value: 3, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; value: 4, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; value: 5, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// &#123; value: undefined, done: true &#125;</span></div></pre></td></tr></table></figure></p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">mdn</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Iterators_and_Generators" target="_blank" rel="external">迭代器和生成器</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;生成器对象&quot;&gt;&lt;a href=&quot;#生成器对象&quot; class=&quot;headerlink&quot; title=&quot;生成器对象&quot;&gt;&lt;/a&gt;生成器对象&lt;/h2&gt;&lt;p&gt;生成器对象是由一个 generator function 返回的,并且它符合可迭代协议和迭代器协议。&lt;/p&gt;
&lt;h3
    
    </summary>
    
      <category term="javascript" scheme="https://zhangbihua.github.io/categories/javascript/"/>
    
      <category term="MDN" scheme="https://zhangbihua.github.io/categories/javascript/MDN/"/>
    
    
      <category term="生成器" scheme="https://zhangbihua.github.io/tags/%E7%94%9F%E6%88%90%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>js对象属性判断</title>
    <link href="https://zhangbihua.github.io/2017/07/09/instanceTypeofContructor/"/>
    <id>https://zhangbihua.github.io/2017/07/09/instanceTypeofContructor/</id>
    <published>2017-07-09T05:08:27.000Z</published>
    <updated>2017-07-13T13:16:09.528Z</updated>
    
    <content type="html"><![CDATA[<h2 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/constructor" target="_blank" rel="external">constructor</a></h2><p>所有对象都会从它的原型上继承一个 constructor 属性 ,返回一个指向创建了该对象原型的函数引用<br><figure class="highlight plain"><figcaption><span>语法</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">object instanceof constructor</div><div class="line">function Tree(name) &#123;</div><div class="line">   this.name = name;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var myTree = new Tree(&quot;Redwood&quot;);</div><div class="line">console.log(myTree.constructor ) // ===&gt; function Tree(name) &#123;this.name = name&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="isPrototypeOf-NaN"><a href="#isPrototypeOf-NaN" class="headerlink" title="isPrototypeOf"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/isPrototypeOf" target="_blank" rel="external">isPrototypeOf</a></h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>prototypeObj.isPrototypeOf(object)</p>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p>用于测试一个对象是否<strong>存在</strong>于另一个对象的原型链上。</p>
<p>当需要判断对象的后代是否在特定原型链上，例如，以保证一定的方法或属性将存在该对象上，这时候就需要用到 instanceof。</p>
<h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof" target="_blank" rel="external">instanceof</a></h2><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><p>object instanceof constructor</p>
<blockquote>
<p>Object.prototype.constructor 特定的函数，用于创建一个对象的原型。</p>
<ul>
<li>instanof 是用来检测一个对象的原型链是否存在参数Oject的原型链上，js中的继承是基于原型链继承，</li>
<li>类似的 Object.getPrototypeOf(child) === parent.protorype返回true</li>
<li>相对比 Object.getPrototypeOf(child) === grandparent.protorype返回false</li>
<li>child instanceof grandparernt返回true</li>
</ul>
</blockquote>
<h3 id="作用-1"><a href="#作用-1" class="headerlink" title="作用"></a>作用</h3><p>instanceof 运算符用来测试 对象(object) 在其原型链(<strong>proto</strong>) 中是否存在构造函数(constructor) 的 prototype 属性。</p>
<ul>
<li>__proto__ 是每个 <strong>对象</strong> 的的属性 </li>
<li>prototype 是每个 <strong>函数</strong> 的属性, Object构造器生成的对象没有prototype属性，Object构造器本身就是一个Function</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/prototype" target="_blank" rel="external">Object.prototype 属性表示 Object 的原型对象。</a></li>
</ul>
<hr>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params">a</span>)</span>&#123;</div><div class="line">  <span class="keyword">this</span>.varA = a;</div><div class="line">&#125;</div><div class="line"></div><div class="line">A.prototype = &#123;</div><div class="line">  <span class="attr">varA</span> : <span class="literal">null</span>,</div><div class="line">  <span class="attr">doSomething</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params">a, b</span>)</span>&#123;</div><div class="line">  A.call(<span class="keyword">this</span>, a);</div><div class="line">  <span class="keyword">this</span>.varB = b;</div><div class="line">&#125;</div><div class="line">B.prototype = <span class="built_in">Object</span>.create(A.prototype, &#123;</div><div class="line">  <span class="attr">varB</span> : &#123;</div><div class="line">    <span class="attr">value</span>: <span class="literal">null</span>, </div><div class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>, </div><div class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>, </div><div class="line">    <span class="attr">writable</span>: <span class="literal">true</span> </div><div class="line">  &#125;,</div><div class="line">  <span class="attr">doSomething</span> : &#123; </div><div class="line">    <span class="attr">value</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">// override</span></div><div class="line">      A.prototype.doSomething.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>); <span class="comment">// call super</span></div><div class="line">      <span class="comment">// ...</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>, </div><div class="line">    <span class="attr">writable</span>: <span class="literal">true</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> B();</div><div class="line">b.doSomething()</div><div class="line"></div><div class="line">b instanceOf B <span class="comment">// ===&gt;true</span></div><div class="line">b instanceOf A <span class="comment">// ===&gt;true</span></div><div class="line"><span class="built_in">Object</span>.getPrototypeOf(b) === B.prototype <span class="comment">// ===&gt; true</span></div><div class="line"><span class="built_in">Object</span>.getPrototypeOf(b) === A.prototype <span class="comment">// ===&gt; false</span></div></pre></td></tr></table></figure>
<p>另外对于A B的两个函数对象，B继承A<br>参考： <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain" target="_blank" rel="external">继承与原型链</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">B <span class="keyword">instanceof</span> A <span class="comment">// ===&gt; false 是继承关系不是实例构造</span></div><div class="line"><span class="built_in">Object</span>.getPrototypeOf(B.prototype) === A.prototype <span class="comment">// ===&gt; true B函数的prototype的原型是A函数的prototype,以此来实现js的原型继承</span></div></pre></td></tr></table></figure>
<hr>
<h2 id="Object-prototype-toString-call"><a href="#Object-prototype-toString-call" class="headerlink" title="Object.prototype.toString.call"></a>Object.prototype.toString.call</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myObj = &#123;&#125;</div><div class="line"><span class="keyword">var</span> myArr = []</div><div class="line"><span class="keyword">var</span> myNumber = <span class="number">1</span></div><div class="line"><span class="keyword">var</span> myStr = <span class="string">'a'</span></div><div class="line"></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(myObj) <span class="comment">// ===&gt; '[object Object]' </span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(myArr) <span class="comment">// ===&gt; '[object Array]' </span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(myNumber) <span class="comment">// ===&gt; '[object Number]'</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(myStr) <span class="comment">// ===&gt; '[object String]'</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">undefined</span>) <span class="comment">// ===&gt; '[object undefined]'</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">null</span>) <span class="comment">// ===&gt; '[object null]'</span></div><div class="line"><span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.nimei = <span class="string">'nimie'</span></div><div class="line">  <span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'nimei'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> b ;</div><div class="line">b. </div><div class="line">b.say()</div></pre></td></tr></table></figure>
<hr>
<h2 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myArr = []</div><div class="line"><span class="keyword">var</span> myNumber = <span class="number">1</span></div><div class="line"><span class="keyword">var</span> myStr = <span class="string">'a'</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> myObj)  <span class="comment">// ===&gt; 'object'</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> myArr)  <span class="comment">// ===&gt; 'object'</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> myNumber)  <span class="comment">// ===&gt; 'number'</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> myStr)  <span class="comment">// ===&gt; 'string'</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">undefined</span>)  <span class="comment">// ===&gt; 'undefined'</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">null</span>)  <span class="comment">// ===&gt; 'object'</span></div></pre></td></tr></table></figure>
<p><strong>so, 相对比typeof ,Object.prototype.toString.call 来判断会对象会更加的准确，在使用typeof Array 和 typeof null 结果与 typeof Ojbect 一样是 ‘object’</strong></p>
<hr>
<h2 id="Array-isArray"><a href="#Array-isArray" class="headerlink" title="Array.isArray()"></a>Array.isArray()</h2><p>用于确定传递的值是否是一个 Array</p>
<h2 id="Number-isNan"><a href="#Number-isNan" class="headerlink" title="Number.isNan()"></a>Number.isNan()</h2><p>用于确定传递的值是否是Nan</p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">mdn</a></li>
<li><a href="http://www.cnblogs.com/zhenchaoni/p/JavaScript_Determine_Types.html" target="_blank" rel="external">JavaScript判断对象的类型</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;constructor-NaN&quot;&gt;&lt;a href=&quot;#constructor-NaN&quot; class=&quot;headerlink&quot; title=&quot;constructor&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.mozilla.org/zh-CN/
    
    </summary>
    
      <category term="javascript" scheme="https://zhangbihua.github.io/categories/javascript/"/>
    
      <category term="MDN" scheme="https://zhangbihua.github.io/categories/javascript/MDN/"/>
    
    
      <category term="js对象属性判断" scheme="https://zhangbihua.github.io/tags/js%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E5%88%A4%E6%96%AD/"/>
    
  </entry>
  
  <entry>
    <title>组合模式(Composite)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/Composite/"/>
    <id>https://zhangbihua.github.io/2017/05/05/Composite/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Component Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Component.operation invoked'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    add(Component) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Component.add invoked'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    remove(Component) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Component.remove invoked'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    getChild(key) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Component.getChild invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Leaf</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(name) &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Leaf Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Leaf.operation invoked'</span>);</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Composite</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(name) &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.children = [];</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Composite Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Composite operation for: '</span> + <span class="keyword">this</span>.name)</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="keyword">this</span>.children) &#123;</div><div class="line">            <span class="keyword">this</span>.children[i].operation();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    add(Component) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Composite.add invoked'</span>);</div><div class="line">        <span class="keyword">this</span>.children.push(Component);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    remove(Component) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Composite.remove invoked'</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="keyword">this</span>.children) &#123;</div><div class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.children[i] === Component) &#123;</div><div class="line">                <span class="keyword">this</span>.children.splice(i, <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    getChild(key) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Composite.getChild invoked'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.children[key];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> composite1 = <span class="keyword">new</span> Composite(<span class="string">'C1'</span>);</div><div class="line">composite1.add(<span class="keyword">new</span> Leaf(<span class="string">'L1'</span>));</div><div class="line">composite1.add(<span class="keyword">new</span> Leaf(<span class="string">'L2'</span>));</div><div class="line"><span class="keyword">var</span> composite2 = <span class="keyword">new</span> Composite(<span class="string">'C2'</span>);</div><div class="line">composite2.add(composite1);</div><div class="line">composite1.getChild(<span class="number">1</span>).operation();</div><div class="line">composite2.operation();</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> CompositePattern &#123;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">interface</span> Component &#123;</div><div class="line">        operation(): <span class="built_in">void</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Composite <span class="keyword">implements</span> Component &#123;</div><div class="line"></div><div class="line">        <span class="keyword">private</span> list: Component[];</div><div class="line">        <span class="keyword">private</span> s: <span class="built_in">String</span>;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span>(<span class="params">s: <span class="built_in">String</span></span>) &#123;</div><div class="line">            <span class="keyword">this</span>.list = [];</div><div class="line">            <span class="keyword">this</span>.s = s;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> operation(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`operation of `"</span>, <span class="keyword">this</span>.s)</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.list.length; i += <span class="number">1</span>) &#123;</div><div class="line">                <span class="keyword">this</span>.list[i].operation();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> add(c: Component): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="keyword">this</span>.list.push(c);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> remove(i: <span class="built_in">number</span>): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.list.length &lt;= i) &#123;</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"index out of bound!"</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">this</span>.list.splice(i, <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Leaf <span class="keyword">implements</span> Component &#123;</div><div class="line">        <span class="keyword">private</span> s: <span class="built_in">String</span>;</div><div class="line">        <span class="keyword">constructor</span>(<span class="params">s: <span class="built_in">String</span></span>) &#123;</div><div class="line">            <span class="keyword">this</span>.s = s;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">public</span> operation(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`operation` of Leaf"</span>, <span class="keyword">this</span>.s, <span class="string">" is called."</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></li>
<li><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Structural Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Structural-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="组合模式" scheme="https://zhangbihua.github.io/tags/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>装饰模式(Decorator)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/Decorator/"/>
    <id>https://zhangbihua.github.io/2017/05/05/Decorator/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<h3 id="装饰模式的定义"><a href="#装饰模式的定义" class="headerlink" title="装饰模式的定义"></a>装饰模式的定义</h3><ul>
<li>装饰模式：装饰模式用于动态地给一个对象增加一些额外的职责，就增加对象功 能来说，装饰模式比生成子类实现更为灵活。它是一种对象结构型模 式。</li>
</ul>
<h3 id="装饰模式包含四个角色："><a href="#装饰模式包含四个角色：" class="headerlink" title="装饰模式包含四个角色："></a>装饰模式包含四个角色：</h3><ul>
<li>Component-抽象构件定义了对象的接口，可以给这些对 象动态增加职责（方法）；</li>
<li>ConcreteComponent-具体构件定义了具体的构件对象，实现了 在抽象构件中声明的方法，装饰器可以给它增加额外的职责（方法）；</li>
<li>Decorator-抽象装饰类是抽象构件类的子类，用于给具体构件增加职责，但是具 体职责在其子类中实现；</li>
<li>ConcreteDecorator-具体装饰类是抽象装饰类的子类，负责向构 件添加新的职责。</li>
</ul>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Component Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Component.operation invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteComponent Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteComponent.operation invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Decorator</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(component) &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.component = component;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Decorator Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Decorator.operation invoked'</span>);</div><div class="line">        <span class="keyword">this</span>.component.operation()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorA</span> <span class="keyword">extends</span> <span class="title">Decorator</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(component, sign) &#123;</div><div class="line">        <span class="keyword">super</span>(component);</div><div class="line">        <span class="keyword">this</span>.addedState = sign;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteDecoratorA Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation() &#123;</div><div class="line">        <span class="keyword">super</span>.operation();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteDecoratorA.operation invoked'</span>);</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.addedState)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorB</span> <span class="keyword">extends</span> <span class="title">Decorator</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(component, sign) &#123;</div><div class="line">        <span class="keyword">super</span>(component);</div><div class="line">        <span class="keyword">this</span>.addedState = sign;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteDecoratorB Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation() &#123;</div><div class="line">        <span class="keyword">super</span>.operation();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteDecoratorB.operation invoked'</span>);</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.addedState + <span class="keyword">this</span>.addedState + <span class="keyword">this</span>.addedState + <span class="keyword">this</span>.addedState + <span class="keyword">this</span>.addedState);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    addedBehavior() &#123;</div><div class="line">        <span class="keyword">this</span>.operation();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteDecoratorB.operation invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> component = <span class="keyword">new</span> ConcreteComponent();</div><div class="line"><span class="keyword">var</span> decoratorA = <span class="keyword">new</span> ConcreteDecoratorA(component, <span class="string">'decoratorA'</span>);</div><div class="line"><span class="keyword">var</span> decoratorB = <span class="keyword">new</span> ConcreteDecoratorB(component, <span class="string">'decoratorB'</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'component: '</span>);</div><div class="line">component.operation();</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'decoratorA: '</span>);</div><div class="line">decoratorA.operation();</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'decoratorB: '</span>);</div><div class="line">decoratorB.addedBehavior();</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> DecoratorPattern &#123;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">interface</span> Component &#123;</div><div class="line">        operation(): <span class="built_in">void</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> ConcreteComponent <span class="keyword">implements</span> Component &#123;</div><div class="line">        <span class="keyword">private</span> s: <span class="built_in">String</span>;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span>(<span class="params">s: <span class="built_in">String</span></span>) &#123;</div><div class="line">            <span class="keyword">this</span>.s = s;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> operation(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`operation` of ConcreteComponent"</span>, <span class="keyword">this</span>.s, <span class="string">" is being called!"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Decorator <span class="keyword">implements</span> Component &#123;</div><div class="line">        <span class="keyword">private</span> component: Component;</div><div class="line">        <span class="keyword">private</span> id: <span class="built_in">Number</span>;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span>(<span class="params">id: <span class="built_in">Number</span>, component: Component</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.id = id;</div><div class="line">            <span class="keyword">this</span>.component = component;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">get</span> Id(): <span class="built_in">Number</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.id;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> operation(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`operation` of Decorator"</span>, <span class="keyword">this</span>.id, <span class="string">" is being called!"</span>);</div><div class="line">            <span class="keyword">this</span>.component.operation();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> ConcreteDecorator <span class="keyword">extends</span> Decorator &#123;</div><div class="line">        <span class="keyword">constructor</span>(<span class="params">id: <span class="built_in">Number</span>, component: Component</span>) &#123;</div><div class="line">            <span class="keyword">super</span>(id, component);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> operation(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="keyword">super</span>.operation();</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`operation` of ConcreteDecorator"</span>, <span class="keyword">this</span>.Id, <span class="string">" is being called!"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></li>
<li><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Structural Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Structural-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="装饰模式" scheme="https://zhangbihua.github.io/tags/%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>外观模式(Facade)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/Facade/"/>
    <id>https://zhangbihua.github.io/2017/05/05/Facade/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<h3 id="外观模式的定义"><a href="#外观模式的定义" class="headerlink" title="外观模式的定义"></a>外观模式的定义</h3><ul>
<li>外观模式：在外观模式中，外部与一个子系统的通信必须通过一个统一的外观对象进行，为子系统中的一组接口提供一个一致的界面，</li>
<li>外观模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。外观模式又称为门面模式，它是一种对象结构型模式。</li>
</ul>
<h3 id="外观模式包含二个角色："><a href="#外观模式包含二个角色：" class="headerlink" title="外观模式包含二个角色："></a>外观模式包含二个角色：</h3><ul>
<li>Facade-外观角色是在客户端直接调用的角色，在外观角色中可以知道相关的(一个或者多个)子系统的功能和责任，它将所有从客户端发来的请求委派到相应的子系统去，传递给相应的子系统对象处理；</li>
<li>SubSystem-在软件系统中可以同时有一个或者多个子系统角色，每一个子系统可以不是一个单独的类，而是一个类的集合，它实现子系统的功能</li>
</ul>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Facade</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"Facade class created"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    gotoPage(dp) &#123;</div><div class="line">        <span class="keyword">switch</span> (dp) &#123;</div><div class="line">            <span class="keyword">case</span> <span class="string">"Facade"</span>:</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Facade"</span>);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="string">"AbstractFactory"</span>:</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the AbstractFactory"</span>);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">"nothing to be matched"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> facade = <span class="keyword">new</span> Facade();</div><div class="line">facade.gotoPage(<span class="string">'Facade'</span>);</div><div class="line">facade.gotoPage(<span class="string">'AbstractFactory'</span>);</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> FacadePattern &#123;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Part1 &#123;</div><div class="line">        <span class="keyword">public</span> method1(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`method1` of Part1"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Part2 &#123;</div><div class="line">        <span class="keyword">public</span> method2(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`method2` of Part2"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Part3 &#123;</div><div class="line">        <span class="keyword">public</span> method3(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`method3` of Part3"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Facade &#123;</div><div class="line">        <span class="keyword">private</span> part1: Part1 = <span class="keyword">new</span> Part1();</div><div class="line">        <span class="keyword">private</span> part2: Part2 = <span class="keyword">new</span> Part2();</div><div class="line">        <span class="keyword">private</span> part3: Part3 = <span class="keyword">new</span> Part3();</div><div class="line"></div><div class="line">        <span class="keyword">public</span> operation1(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`operation1` is called ==="</span>);</div><div class="line">            <span class="keyword">this</span>.part1.method1();</div><div class="line">            <span class="keyword">this</span>.part2.method2();</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"=========================="</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> operation2(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`operation2` is called ==="</span>);</div><div class="line">            <span class="keyword">this</span>.part1.method1();</div><div class="line">            <span class="keyword">this</span>.part3.method3();</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"=========================="</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></li>
<li><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Structural Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Structural-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="外观模式" scheme="https://zhangbihua.github.io/tags/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>抽象工厂模式(Abstract Factory)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/AbstractFactory/"/>
    <id>https://zhangbihua.github.io/2017/05/05/AbstractFactory/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<h3 id="抽象工厂模式的定义"><a href="#抽象工厂模式的定义" class="headerlink" title="抽象工厂模式的定义"></a>抽象工厂模式的定义</h3><ul>
<li>抽象工厂模式是所有形式的工厂模式中最为抽象和最具一般性的一种形态。</li>
<li>抽象工厂模式与工厂方法模式最大的区别在于，工厂方法模式针对的是一个产品等级结构，而抽象工厂模式则需要面对多个产品等级结构</li>
</ul>
<h3 id="抽象工厂模式包含四个角色："><a href="#抽象工厂模式包含四个角色：" class="headerlink" title="抽象工厂模式包含四个角色："></a>抽象工厂模式包含四个角色：</h3><ul>
<li>ConcreteFactory-具体工厂实现了抽象工厂声明的生成抽象产品的方法，生成一组具体产品，这些产品构成了一个产品族，每一个产品都位于某个产品等级结构中；</li>
<li>AbstractProduct-抽象产品为每种产品声明接口，在抽象产品中定义了产品的抽象业务方法；</li>
<li>AbstractFactory-抽象工厂用于明生成抽象产品的方法；</li>
<li>Product-具体产品定义具体工厂生产的具体产品对象，实现抽象产品接口中定义的业务方法。</li>
</ul>
<h3 id="抽象工厂模式适用情况包括："><a href="#抽象工厂模式适用情况包括：" class="headerlink" title="抽象工厂模式适用情况包括："></a>抽象工厂模式适用情况包括：</h3><ul>
<li>一个系统不应当依赖于产品类实例如何被创建、组合和表达的细节；</li>
<li>系统中有多于一个的产品族，而每次只使用其中某一产品族；</li>
<li>属于同一个产品族的产品将在一起使用；</li>
<li>系统提供一个产品类的库，所有的产品以同样的接口出现，从而使客户端不依赖于具体实现。</li>
</ul>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbstractFactory</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"AbstractFactory class created"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    createProductA(product) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"AbstractFactory.createProductA created"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    createProductB(product) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"AbstractFactory.createProductB created"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory1</span> <span class="keyword">extends</span> <span class="title">AbstractFactory</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcreteFactory1 class created"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    createProductA(product) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteFactory1 createProductA'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductA1();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    createProductB(product) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteFactory1 createProductB'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductB1();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory2</span> <span class="keyword">extends</span> <span class="title">AbstractFactory</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcreteFactory2 class created"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    createProductA(product) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteFactory2 createProductA'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductA2();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    createProductB(product) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteFactory2 createProductB'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductB2();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbstractProductA</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'AbstractProductA class created'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbstractProductB</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'AbstractProductB class created'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductA1</span> <span class="keyword">extends</span> <span class="title">AbstractProductA</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ProductA1 class created'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductA2</span> <span class="keyword">extends</span> <span class="title">AbstractProductA</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ProductA2 class created'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductB1</span> <span class="keyword">extends</span> <span class="title">AbstractProductB</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ProductB1 class created'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductB2</span> <span class="keyword">extends</span> <span class="title">AbstractProductB</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ProductB2 class created'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> factory1 = <span class="keyword">new</span> ConcreteFactory1();</div><div class="line"><span class="keyword">var</span> productB1 = factory1.createProductB();</div><div class="line"><span class="keyword">var</span> productA1 = factory1.createProductA();</div><div class="line"></div><div class="line"><span class="keyword">var</span> factory2 = <span class="keyword">new</span> ConcreteFactory2();</div><div class="line"><span class="keyword">var</span> productA2 = factory2.createProductA();</div><div class="line"><span class="keyword">var</span> productB2 = factory2.createProductB();</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> AbstractFactoryPattern &#123;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">interface</span> AbstractProductA &#123;</div><div class="line">        methodA(): <span class="built_in">string</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">interface</span> AbstractProductB &#123;</div><div class="line">        methodB(): <span class="built_in">number</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">interface</span> AbstractFactory &#123;</div><div class="line">        createProductA(param?: <span class="built_in">any</span>) : AbstractProductA;</div><div class="line">        createProductB() : AbstractProductB;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> ProductA1 <span class="keyword">implements</span> AbstractProductA &#123;</div><div class="line">        methodA = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"This is methodA of ProductA1"</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> ProductB1 <span class="keyword">implements</span> AbstractProductB &#123;</div><div class="line">        methodB = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> ProductA2 <span class="keyword">implements</span> AbstractProductA &#123;</div><div class="line">        methodA = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"This is methodA of ProductA2"</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> ProductB2 <span class="keyword">implements</span> AbstractProductB &#123;</div><div class="line">        methodB = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> ConcreteFactory1 <span class="keyword">implements</span> AbstractFactory &#123;</div><div class="line">        createProductA(param?: <span class="built_in">any</span>) : AbstractProductA &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ProductA1();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        createProductB(param?: <span class="built_in">any</span>) : AbstractProductB &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ProductB1();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> ConcreteFactory2 <span class="keyword">implements</span> AbstractFactory &#123;</div><div class="line">        createProductA(param?: <span class="built_in">any</span>) : AbstractProductA &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ProductA2();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        createProductB(param?: <span class="built_in">any</span>) : AbstractProductB &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ProductB2();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Tester &#123;</div><div class="line">        <span class="keyword">private</span> abstractProductA: AbstractProductA;</div><div class="line">        <span class="keyword">private</span> abstractProductB: AbstractProductB;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span>(<span class="params">factory: AbstractFactory</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.abstractProductA = factory.createProductA();</div><div class="line">            <span class="keyword">this</span>.abstractProductB = factory.createProductB();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> test(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.abstractProductA.methodA());</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.abstractProductB.methodB());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><p><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></p>
</li>
<li><p><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></p>
</li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Creational Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Creational-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="抽象工厂模式" scheme="https://zhangbihua.github.io/tags/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>享元模式(Flyweight)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/Flyweight/"/>
    <id>https://zhangbihua.github.io/2017/05/05/Flyweight/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<h3 id="享元模式的定义"><a href="#享元模式的定义" class="headerlink" title="享元模式的定义"></a>享元模式的定义</h3><ul>
<li>享元模式：享元模式运用共享技术有效地支持大量细粒度对象的复用。系统只使用少量的对象，而这些对象都很相似，状态变化很小，可以实现对象的多次复用，它是一种对象结构型模式。</li>
</ul>
<h3 id="享元模式包含四个角色："><a href="#享元模式包含四个角色：" class="headerlink" title="享元模式包含四个角色："></a>享元模式包含四个角色：</h3><ul>
<li>Flyweight-抽象享元类声明一个接口，通过它可以接受并作用于外部状态；</li>
<li>ConcreteFlyweight-具体享元类实现了抽象享元接口，其实例称为享元对象；</li>
<li>UnsharedConcreteFlyweight-非共享具体享元是不能被共享的抽象享元类的子类；</li>
<li>FlyweightFactory-享元工厂类用于创建并管理享元对象，它针对抽象享元类编程，将各种类型的具体享元对象存储在一个享元池中。</li>
</ul>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlyweightFactory</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">this</span>.flyweights = &#123;&#125;;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'FlyweightFactory Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    getFlyweight(key) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'FlyweightFactory.getFlyweight invoked'</span>);</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.flyweights[key]) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.flyweights[key];</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">this</span>.flyweights[key] = <span class="keyword">new</span> ConcreteFlyweight(key);</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.flyweights[key];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    createGibberish(keys) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'FlyweightFactory.createGibberish invoked'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> UnsharedConcreteFlyweight(keys, <span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flyweight</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Flyweight Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation(extrinsicState) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Flyweight.operation invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFlyweight</span> <span class="keyword">extends</span> <span class="title">Flyweight</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(key) &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.intrinsicState = key;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteFlyweight Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation(extrinsicState) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteFlyweight.operation invoked'</span>);</div><div class="line">        <span class="keyword">return</span> extrinsicState + <span class="keyword">this</span>.intrinsicState;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnsharedConcreteFlyweight</span> <span class="keyword">extends</span> <span class="title">Flyweight</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(keys, flyweights) &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.flyweights = flyweights;</div><div class="line">        <span class="keyword">this</span>.keys = keys;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'UnsharedConcreteFlyweight Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation(extrinsicState) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'UnsharedConcreteFlyweight.operation invoked'</span>);</div><div class="line">        <span class="keyword">var</span> key, word = <span class="string">''</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; extrinsicState; i++) &#123;</div><div class="line">            key = <span class="keyword">this</span>.keys[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (<span class="keyword">this</span>.keys.length))];</div><div class="line">            word = <span class="keyword">this</span>.flyweights.getFlyweight(key).operation(word);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'UnsharedConcreteFlyweight Operation: '</span>);</div><div class="line">        <span class="built_in">console</span>.log(word);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">var</span> flyweights = <span class="keyword">new</span> FlyweightFactory();</div><div class="line"><span class="keyword">var</span> gibberish = flyweights.createGibberish([<span class="string">'-'</span>, <span class="string">'+'</span>, <span class="string">'*'</span>]);</div><div class="line">gibberish.operation(<span class="number">5</span>);</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> FlyweightPattern &#123;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">interface</span> Flyweight &#123;</div><div class="line">        operation(s: <span class="built_in">String</span>): <span class="built_in">void</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> ConcreteFlyweight <span class="keyword">implements</span> Flyweight &#123;</div><div class="line">        <span class="keyword">private</span> instrinsicState: <span class="built_in">String</span>;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span>(<span class="params">instrinsicState: <span class="built_in">String</span></span>) &#123;</div><div class="line">            <span class="keyword">this</span>.instrinsicState = instrinsicState;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> operation(s: <span class="built_in">String</span>): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`operation` of ConcreteFlyweight"</span>, s, <span class="string">" is being called!"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> UnsharedConcreteFlyweight <span class="keyword">implements</span> Flyweight &#123;</div><div class="line">        <span class="keyword">private</span> allState: <span class="built_in">number</span>;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span>(<span class="params">allState: <span class="built_in">number</span></span>) &#123;</div><div class="line">            <span class="keyword">this</span>.allState = allState;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> operation(s: <span class="built_in">String</span>): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`operation` of UnsharedConcreteFlyweight"</span>, s, <span class="string">" is being called!"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> FlyweightFactory &#123;</div><div class="line"></div><div class="line">        <span class="keyword">private</span> fliesMap: &#123; [s: <span class="built_in">string</span>]: Flyweight; &#125; = &lt;<span class="built_in">any</span>&gt;&#123;&#125;;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span>(<span class="params"></span>) &#123; &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> getFlyweight(key: <span class="built_in">string</span>): Flyweight &#123;</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.fliesMap[key] === <span class="literal">undefined</span> || <span class="literal">null</span>) &#123;</div><div class="line">                <span class="keyword">this</span>.fliesMap[key] = <span class="keyword">new</span> ConcreteFlyweight(key);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.fliesMap[key];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></li>
<li><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Structural Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Structural-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="享元模式" scheme="https://zhangbihua.github.io/tags/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>解析器模式(Interpreter)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/Interpreter/"/>
    <id>https://zhangbihua.github.io/2017/05/05/Interpreter/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<h3 id="解析器模式的定义"><a href="#解析器模式的定义" class="headerlink" title="解析器模式的定义"></a>解析器模式的定义</h3><ul>
<li>解析器模式：在外观模式中，外部与一个子系统的通信必须通过一个统一的外观对象进行，为子系统中的一组接口提供一个一致的界面，</li>
<li>外观模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。外观模式又称为门面模式，它是一种对象结构型模式。</li>
</ul>
<h3 id="解析器模式包含二个角色："><a href="#解析器模式包含二个角色：" class="headerlink" title="解析器模式包含二个角色："></a>解析器模式包含二个角色：</h3><ul>
<li>Interpreter-外观角色是在客户端直接调用的角色，在外观角色中可以知道相关的(一个或者多个)子系统的功能和责任，它将所有从客户端发来的请求委派到相应的子系统去，传递给相应的子系统对象处理；</li>
<li>SubSystem-在软件系统中可以同时有一个或者多个子系统角色，每一个子系统可以不是一个单独的类，而是一个类的集合，它实现子系统的功能</li>
</ul>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Context</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(input) &#123;</div><div class="line">        <span class="keyword">this</span>.sum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">this</span>.list = [];</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Context Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    add(eps) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Context.add invoked'</span>);</div><div class="line">        <span class="keyword">this</span>.list.push(eps);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    getList() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Context.getList invoked'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.list;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    getSum() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Context.getSum invoked'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.sum;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    setSum(_sum) &#123;</div><div class="line">        <span class="keyword">this</span>.sum = _sum;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Context.setSum invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbstractExpression</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'AbstractExpression Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    interpret(context) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'AbstractExpression.interpret invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PlusExpression</span> <span class="keyword">extends</span> <span class="title">AbstractExpression</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(name) &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'PlusExpression Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    interpret(context) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'PlusExpression.interpret invoked'</span>);</div><div class="line">        <span class="keyword">var</span> sum = context.getSum();</div><div class="line">        sum++;</div><div class="line">        context.setSum(sum);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinusExpression</span> <span class="keyword">extends</span> <span class="title">AbstractExpression</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.name = <span class="string">'+'</span>;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'MinusExpression Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    interpret(context) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'MinusExpression.interpret invoked'</span>);</div><div class="line">        <span class="keyword">var</span> sum = context.getSum();</div><div class="line">        sum--;</div><div class="line">        context.setSum(sum)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> context = <span class="keyword">new</span> Context();</div><div class="line">context.setSum(<span class="number">20</span>);</div><div class="line"></div><div class="line">context.add(<span class="keyword">new</span> PlusExpression());</div><div class="line">context.add(<span class="keyword">new</span> PlusExpression());</div><div class="line">context.add(<span class="keyword">new</span> PlusExpression());</div><div class="line"></div><div class="line">context.add(<span class="keyword">new</span> MinusExpression());</div><div class="line">context.add(<span class="keyword">new</span> MinusExpression());</div><div class="line"></div><div class="line"><span class="keyword">var</span> list = context.getList();</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> expression = list[i];</div><div class="line">    expression.interpret(context);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">"Result："</span> + context.getSum());</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> InterpreterPattern &#123;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Context &#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">interface</span> AbstractExpression &#123;</div><div class="line">        interpret(context: Context): <span class="built_in">void</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> TerminalExpression <span class="keyword">implements</span> AbstractExpression &#123;</div><div class="line">        <span class="keyword">public</span> interpret(context: Context): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`interpret` method of TerminalExpression is being called!"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> NonterminalExpression <span class="keyword">implements</span> AbstractExpression &#123;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> interpret(context: Context): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`interpret` method of NonterminalExpression is being called!"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></li>
<li><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Behavioral Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Behavioral-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="解析器模式" scheme="https://zhangbihua.github.io/tags/%E8%A7%A3%E6%9E%90%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>迭代器(Iterator)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/Iterator/"/>
    <id>https://zhangbihua.github.io/2017/05/05/Iterator/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Iterator</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Iterator Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    first() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Iterator.first invoked'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    next() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Iterator.next invoked'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    isDone() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Iterator.isDone invoked'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    currentItem() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Iterator.currentItem invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteIterator</span> <span class="keyword">extends</span> <span class="title">Iterator</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(aggregate) &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.index = <span class="number">0</span>;</div><div class="line">        <span class="keyword">this</span>.aggregate = aggregate;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteIterator Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    first() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteIterator.first invoked'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.aggregate.list[<span class="number">0</span>];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    next() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteIterator.next invoked'</span>);</div><div class="line">        <span class="keyword">this</span>.index += <span class="number">1</span>;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.aggregate.list[<span class="keyword">this</span>.index];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    currentItem() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteIterator.currentItem invoked'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.aggregate.list[<span class="keyword">this</span>.index];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Aggregate</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Aggregate Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    createIterator() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Aggregate.CreateIterator invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteAggregate</span> <span class="keyword">extends</span> <span class="title">Aggregate</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(list) &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.list = list;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteAggregate Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    createIterator() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteAggregate.CreateIterator invoked'</span>);</div><div class="line">        <span class="keyword">this</span>.iterator = <span class="keyword">new</span> ConcreteIterator(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> aggregate = <span class="keyword">new</span> ConcreteAggregate([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]);</div><div class="line">aggregate.createIterator();</div><div class="line"><span class="built_in">console</span>.log(aggregate.iterator.first());</div><div class="line"><span class="built_in">console</span>.log(aggregate.iterator.next());</div><div class="line"><span class="built_in">console</span>.log(aggregate.iterator.currentItem());</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> IteratorPattern &#123;</div><div class="line">	<span class="keyword">export</span> <span class="keyword">namespace</span> Demo &#123;</div><div class="line"></div><div class="line">		<span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>) : <span class="title">void</span> </span>&#123;</div><div class="line">		    <span class="keyword">var</span> nArray = [<span class="number">1</span>, <span class="number">7</span>, <span class="number">21</span>, <span class="number">657</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">765</span>, <span class="number">13</span>, <span class="number">65</span>],</div><div class="line">				numbers: IteratorPattern.Numbers = <span class="keyword">new</span> IteratorPattern.Numbers(nArray),</div><div class="line">				it: IteratorPattern.ConcreteIterator = &lt;IteratorPattern.ConcreteIterator&gt;numbers.createIterator();</div><div class="line"></div><div class="line">			<span class="keyword">while</span> (it.hasNext()) &#123;</div><div class="line">				<span class="built_in">console</span>.log(it.next());</div><div class="line">			&#125;</div><div class="line"></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></li>
<li><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Behavioral Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Behavioral-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="迭代器" scheme="https://zhangbihua.github.io/tags/%E8%BF%AD%E4%BB%A3%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>观察者模式(Observer)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/Observer/"/>
    <id>https://zhangbihua.github.io/2017/05/05/Observer/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<h3 id="观察者模式的定义"><a href="#观察者模式的定义" class="headerlink" title="观察者模式的定义"></a>观察者模式的定义</h3><ul>
<li>观察者模式定义对象间的一种一对多依赖关系，使得每当一个对象状态发生改变时，其相关依赖对象皆得到通知并被自动更新。</li>
<li>观察者模式又叫做发布-订阅模式、模型-视图模式、源-监听器模式或从属者模式。</li>
<li>观察者模式是一种对象行为型模式。</li>
</ul>
<h3 id="观察者模式包含四个角色："><a href="#观察者模式包含四个角色：" class="headerlink" title="观察者模式包含四个角色："></a>观察者模式包含四个角色：</h3><ul>
<li>Subject-目标又称为主题，它是指被观察的对象；</li>
<li>ConcreteSubject-具体目标是目标类的子类，通常它包含有经常发生改变的数据，当它的状态发生改变时，向它的各个观察者发出通知；</li>
<li>Observer-观察者将对观察目标的改变做出反应；</li>
<li>ConcreteObserver-在具体观察者中维护一个指向具体目标对象的引用，它存储具体观察者的有关状态，这些状态需要和具体目标的状态保持一致。</li>
</ul>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Subject Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    attach(observer) &#123;</div><div class="line">        <span class="keyword">this</span>.observers.push(observer);</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Subject.attach invoked'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    dettach(observer) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Subject.dettach invoked'</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="keyword">this</span>.observers) &#123;</div><div class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.observers[i] === observer) &#123;</div><div class="line">                <span class="keyword">this</span>.observers.splice(i, <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    notify() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Subject.notify invoked'</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="keyword">this</span>.observers) &#123;</div><div class="line">            <span class="keyword">this</span>.observers[i].update(<span class="keyword">this</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteSubject</span> <span class="keyword">extends</span> <span class="title">Subject</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.subjectState = <span class="literal">null</span>;</div><div class="line">        <span class="keyword">this</span>.observers = [];</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteSubject Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    getState() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteSubject.getState invoked'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.subjectState;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    setState(state) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteSubject.setState invoked'</span>);</div><div class="line">        <span class="keyword">this</span>.subjectState = state;</div><div class="line">        <span class="keyword">this</span>.notify();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Observer Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    update() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Observer.update invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteObserver</span> <span class="keyword">extends</span> <span class="title">Observer</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.observerState = <span class="string">''</span>;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteObserver Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    update(Subject) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteObserver.update invoked'</span>);</div><div class="line">        <span class="keyword">this</span>.observerState = Subject.getState();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Observer new state: '</span> + <span class="keyword">this</span>.observerState);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> observer1 = <span class="keyword">new</span> ConcreteObserver();</div><div class="line"><span class="keyword">var</span> observer2 = <span class="keyword">new</span> ConcreteObserver();</div><div class="line"><span class="keyword">var</span> subject = <span class="keyword">new</span> ConcreteSubject();</div><div class="line">subject.attach(observer1);</div><div class="line">subject.attach(observer2);</div><div class="line">subject.setState(<span class="string">'state 1'</span>);</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> ObserverPattern &#123;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Subject &#123;</div><div class="line">        <span class="keyword">private</span> observers: Observer[] = [];</div><div class="line"></div><div class="line">        <span class="keyword">public</span> register(observer: Observer): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(observer, <span class="string">"is pushed!"</span>);</div><div class="line">            <span class="keyword">this</span>.observers.push(observer);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> unregister(observer: Observer): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="keyword">var</span> n: <span class="built_in">number</span> = <span class="keyword">this</span>.observers.indexOf(observer);</div><div class="line">            <span class="built_in">console</span>.log(observer, <span class="string">"is removed"</span>);</div><div class="line">            <span class="keyword">this</span>.observers.splice(n, <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> notify(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"notify all the observers"</span>, <span class="keyword">this</span>.observers);</div><div class="line">            <span class="keyword">var</span> i: <span class="built_in">number</span></div><div class="line">              , max: <span class="built_in">number</span>;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (i = <span class="number">0</span>, max = <span class="keyword">this</span>.observers.length; i &lt; max; i += <span class="number">1</span>) &#123;</div><div class="line">                <span class="keyword">this</span>.observers[i].notify();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> ConcreteSubject <span class="keyword">extends</span> Subject &#123;</div><div class="line">        <span class="keyword">private</span> subjectState: <span class="built_in">number</span>;</div><div class="line"></div><div class="line">        <span class="keyword">get</span> SubjectState(): <span class="built_in">number</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.subjectState;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">set</span> SubjectState(subjectState: <span class="built_in">number</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.subjectState = subjectState;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Observer &#123;</div><div class="line">        <span class="keyword">public</span> notify(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Abstract Method!"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> ConcreteObserver <span class="keyword">extends</span> Observer &#123;</div><div class="line">        <span class="keyword">private</span> name: <span class="built_in">string</span>;</div><div class="line">        <span class="keyword">private</span> state: <span class="built_in">number</span>;</div><div class="line">        <span class="keyword">private</span> subject: ConcreteSubject;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span> (<span class="params">subject: ConcreteSubject, name: <span class="built_in">string</span></span>) &#123;</div><div class="line">            <span class="keyword">super</span>();</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"ConcreteObserver"</span>, name, <span class="string">"is created!"</span>);</div><div class="line">            <span class="keyword">this</span>.subject = subject;</div><div class="line">            <span class="keyword">this</span>.name = name;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> notify(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"ConcreteObserver's notify method"</span>);</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.name, <span class="keyword">this</span>.state);</div><div class="line">            <span class="keyword">this</span>.state = <span class="keyword">this</span>.subject.SubjectState;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">get</span> Subject(): ConcreteSubject &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.subject;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">set</span> Subject(subject: ConcreteSubject) &#123;</div><div class="line">            <span class="keyword">this</span>.subject = subject;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></li>
<li><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Behavioral Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Behavioral-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="观察者模式" scheme="https://zhangbihua.github.io/tags/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>桥接模式(Bridge)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/Bridge/"/>
    <id>https://zhangbihua.github.io/2017/05/05/Bridge/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<h3 id="桥接模式的定义"><a href="#桥接模式的定义" class="headerlink" title="桥接模式的定义"></a>桥接模式的定义</h3><ul>
<li>桥接模式：模式将抽象部分与它的实现部分分离，使它们都可以独立地变化。它是一种对象结构型模式，又称为柄体(Handle and Body)模式或接口(Interface)模式。</li>
</ul>
<h3 id="桥接模式包含四个角色："><a href="#桥接模式包含四个角色：" class="headerlink" title="桥接模式包含四个角色："></a>桥接模式包含四个角色：</h3><ul>
<li>Abstraction-抽象类中定义了一个实现类接口类型的对象并可以维护该对象；</li>
<li>RefinedAbstraction-扩充抽象类扩充由抽象类定义的接口，它实现了在抽象类中定义的抽象业务方法，在扩充抽象类中可以调用在实现类接口中定义的业务方法；</li>
<li>Implementor实现类接口定义了实现类的接口，实现类接口仅提供基本操作，而抽象类定义的接口可能会做更多更复杂的操作；</li>
<li>ConcreteImplementor具体实现类实现了实现类接口并且具体实现它，在不同的具体实现类中提供基本操作的不同实现，在程序运行时，具体实现类对象将替换其父类对象，提供给客户端具体的业务操作方法。</li>
</ul>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Abstraction</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Abstraction Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Abstraction.operation invoked'</span>);</div><div class="line">        <span class="keyword">this</span>.imp.operationImp();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RefinedAbstraction</span> <span class="keyword">extends</span> <span class="title">Abstraction</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>()</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'RefinedAbstraction Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    setImp(imp) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'RefinedAbstraction.setImp invoked'</span>);</div><div class="line">        <span class="keyword">this</span>.imp = imp</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Implementor</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Implementor Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operationImp() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Implementor.operationImp invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteImplementorA</span> <span class="keyword">extends</span> <span class="title">Implementor</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>()</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteImplementorA Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operationImp() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteImplementorA.operationImp invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteImplementorB</span> <span class="keyword">extends</span> <span class="title">Implementor</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>()</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteImplementorB Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operationImp() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteImplementorB.operationImp invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> abstraction = <span class="keyword">new</span> RefinedAbstraction();</div><div class="line">abstraction.setImp(<span class="keyword">new</span> ConcreteImplementorA());</div><div class="line">abstraction.operation();</div><div class="line">abstraction.setImp(<span class="keyword">new</span> ConcreteImplementorB());</div><div class="line">abstraction.operation();</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Abstraction &#123;</div><div class="line">    <span class="keyword">constructor</span>(<span class="params"></span>) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Abstraction Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operation() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Abstraction.operation invoked'</span>);</div><div class="line">        <span class="keyword">this</span>.imp.operationImp();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> RefinedAbstraction <span class="keyword">extends</span> Abstraction &#123;</div><div class="line">    <span class="keyword">constructor</span>(<span class="params"></span>) &#123;</div><div class="line">        <span class="keyword">super</span>()</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'RefinedAbstraction Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    setImp(imp) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'RefinedAbstraction.setImp invoked'</span>);</div><div class="line">        <span class="keyword">this</span>.imp = imp</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> Implementor &#123;</div><div class="line">    <span class="keyword">constructor</span>(<span class="params"></span>) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Implementor Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operationImp() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Implementor.operationImp invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> ConcreteImplementorA <span class="keyword">extends</span> Implementor &#123;</div><div class="line">    <span class="keyword">constructor</span>(<span class="params"></span>) &#123;</div><div class="line">        <span class="keyword">super</span>()</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteImplementorA Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operationImp() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteImplementorA.operationImp invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> ConcreteImplementorB <span class="keyword">extends</span> Implementor &#123;</div><div class="line">    <span class="keyword">constructor</span>(<span class="params"></span>) &#123;</div><div class="line">        <span class="keyword">super</span>()</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteImplementorB Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    operationImp() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteImplementorB.operationImp invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> abstraction = <span class="keyword">new</span> RefinedAbstraction();</div><div class="line">abstraction.setImp(<span class="keyword">new</span> ConcreteImplementorA());</div><div class="line">abstraction.operation();</div><div class="line">abstraction.setImp(<span class="keyword">new</span> ConcreteImplementorB());</div><div class="line">abstraction.operation();</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></li>
<li><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Structural Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Structural-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="桥接模式" scheme="https://zhangbihua.github.io/tags/%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>原型模式(Prototype)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/Prototype/"/>
    <id>https://zhangbihua.github.io/2017/05/05/Prototype/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Prototype</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(prototype) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"Prototype Class created"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    setFeature(key, val) &#123;</div><div class="line">        <span class="keyword">this</span>[key] = val</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    clone() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"Prototype.clone invoked"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcretePrototype1</span> <span class="keyword">extends</span> <span class="title">Prototype</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcretePrototype1 created"</span>);</div><div class="line">        <span class="keyword">this</span>.feature = <span class="string">"feature 1"</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    clone() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcretePrototype1.clone invoked'</span>);</div><div class="line">        <span class="keyword">let</span> clone = <span class="keyword">new</span> ConcretePrototype1();</div><div class="line">        <span class="keyword">let</span> keys = <span class="built_in">Object</span>.keys(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">        keys.forEach(<span class="function"><span class="params">k</span> =&gt;</span> clone.setFeature(k, <span class="keyword">this</span>[k]));</div><div class="line"></div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcretePrototype1 cloned"</span>);</div><div class="line">        <span class="keyword">return</span> clone;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcretePrototype2</span> <span class="keyword">extends</span> <span class="title">Prototype</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcretePrototype2 created"</span>);</div><div class="line">        <span class="keyword">this</span>.feature = <span class="string">"feature 2"</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    clone() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcretePrototype2.Clone function'</span>);</div><div class="line">        <span class="keyword">let</span> clone = <span class="keyword">new</span> ConcretePrototype2();</div><div class="line">        <span class="keyword">let</span> keys = <span class="built_in">Object</span>.keys(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">        keys.forEach(<span class="function"><span class="params">k</span> =&gt;</span> clone.setFeature(k, <span class="keyword">this</span>[k]));</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcretePrototype2 cloned"</span>);</div><div class="line">        <span class="keyword">return</span> clone;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> proto1 = <span class="keyword">new</span> ConcretePrototype1();</div><div class="line">proto1.setFeature(<span class="string">'feature'</span>, <span class="string">"feature 11"</span>);</div><div class="line"><span class="keyword">var</span> clone1 = proto1.clone();</div><div class="line"><span class="built_in">console</span>.log(clone1.feature);</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> clone1);</div><div class="line"><span class="built_in">console</span>.log(clone1 === proto1);</div><div class="line"></div><div class="line"><span class="keyword">var</span> proto2 = <span class="keyword">new</span> ConcretePrototype2();</div><div class="line">proto2.setFeature(<span class="string">'feature'</span>, <span class="string">"feature 22"</span>);</div><div class="line"><span class="keyword">var</span> clone2 = proto2.clone();</div><div class="line"><span class="built_in">console</span>.log(clone2.feature);</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> clone2);</div><div class="line"><span class="built_in">console</span>.log(clone2 === proto2);</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> PrototypePattern &#123;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">interface</span> Prototype &#123;</div><div class="line">        clone(): Prototype;</div><div class="line">        toString(): <span class="built_in">string</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Concrete1 <span class="keyword">implements</span> Prototype &#123;</div><div class="line"></div><div class="line">        clone() : Prototype &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Concrete1();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        toString(): <span class="built_in">string</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"This is Concrete1"</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Concrete2 <span class="keyword">implements</span> Prototype &#123;</div><div class="line"></div><div class="line">        clone() : Prototype &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Concrete2();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        toString(): <span class="built_in">string</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"This is Concrete2"</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Concrete3 <span class="keyword">implements</span> Prototype &#123;</div><div class="line"></div><div class="line">        clone() : Prototype &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Concrete3();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        toString(): <span class="built_in">string</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"This is Concrete3"</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Builder &#123;</div><div class="line">        <span class="keyword">private</span> prototypeMap: &#123; [s: <span class="built_in">string</span>]: Prototype; &#125; = &#123;&#125;;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span>(<span class="params"></span>) &#123;</div><div class="line">            <span class="keyword">this</span>.prototypeMap[<span class="string">'c1'</span>] = <span class="keyword">new</span> Concrete1();</div><div class="line">            <span class="keyword">this</span>.prototypeMap[<span class="string">'c2'</span>] = <span class="keyword">new</span> Concrete2();</div><div class="line">            <span class="keyword">this</span>.prototypeMap[<span class="string">'c3'</span>] = <span class="keyword">new</span> Concrete3();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        createOne(s: <span class="built_in">string</span>): Prototype &#123;</div><div class="line">            <span class="built_in">console</span>.log(s);</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.prototypeMap[s].clone();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><p><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></p>
</li>
<li><p><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></p>
</li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Creational Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Creational-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="原型模式" scheme="https://zhangbihua.github.io/tags/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>代理模式(Proxy)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/Proxy/"/>
    <id>https://zhangbihua.github.io/2017/05/05/Proxy/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-13T06:11:52.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<h3 id="代理模式的定义"><a href="#代理模式的定义" class="headerlink" title="代理模式的定义"></a>代理模式的定义</h3><ul>
<li>代理模式(Proxy Pattern) ：给某一个对象提供一个代理，并由代理对象控制对原对象的引用。代理模式的英 文叫做Proxy或Surrogate，它是一种对象结构型模式。</li>
</ul>
<h3 id="代理模式包含三个角色："><a href="#代理模式包含三个角色：" class="headerlink" title="代理模式包含三个角色："></a>代理模式包含三个角色：</h3><p>Subject: 抽象主题角色<br>Proxy: 代理主题角色<br>RealSubject: 真实主题角色</p>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Subject Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    request() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Subject.request invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealSubject</span> <span class="keyword">extends</span> <span class="title">Subject</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>()</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'RealSubject Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    request() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'RealSubject.request invoked'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Proxy</span> <span class="keyword">extends</span> <span class="title">Subject</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>()</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Proxy Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    request() &#123;</div><div class="line">        <span class="keyword">this</span>.realSubject = <span class="keyword">new</span> RealSubject();</div><div class="line">        <span class="keyword">this</span>.realSubject.request();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>()</div><div class="line">proxy.request()</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> ProxyPattern &#123;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">interface</span> Subject &#123;</div><div class="line">        doAction(): <span class="built_in">void</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> Proxy <span class="keyword">implements</span> Subject &#123;</div><div class="line">        <span class="keyword">private</span> realSubject: RealSubject;</div><div class="line">        <span class="keyword">private</span> s: <span class="built_in">string</span>;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span>(<span class="params">s: <span class="built_in">string</span></span>) &#123;</div><div class="line">            <span class="keyword">this</span>.s = s;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> doAction(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`doAction` of Proxy("</span>, <span class="keyword">this</span>.s, <span class="string">")"</span>);</div><div class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.realSubject === <span class="literal">null</span> || <span class="keyword">this</span>.realSubject === <span class="literal">undefined</span>) &#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">"creating a new RealSubject."</span>);</div><div class="line">                <span class="keyword">this</span>.realSubject = <span class="keyword">new</span> RealSubject(<span class="keyword">this</span>.s);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">this</span>.realSubject.doAction();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> RealSubject <span class="keyword">implements</span> Subject &#123;</div><div class="line">        <span class="keyword">private</span> s: <span class="built_in">string</span>;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span>(<span class="params">s: <span class="built_in">string</span></span>) &#123;</div><div class="line">            <span class="keyword">this</span>.s = s;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">public</span> doAction(): <span class="built_in">void</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"`doAction` of RealSubject"</span>, <span class="keyword">this</span>.s, <span class="string">"is being called!"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></li>
<li><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Structural Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Structural-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="代理模式" scheme="https://zhangbihua.github.io/tags/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>建造者模式(Builder)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/Builder/"/>
    <id>https://zhangbihua.github.io/2017/05/05/Builder/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<h3 id="建造者模式包含如下四个角色："><a href="#建造者模式包含如下四个角色：" class="headerlink" title="建造者模式包含如下四个角色："></a>建造者模式包含如下四个角色：</h3><ul>
<li>Builder-抽象建造者为创建一个产品对象的各个部件指定抽象接口；</li>
<li>ConcreteBuilder-具体建造者实现了抽象建造者接口，实现各个部件的构造和装配方法，定义并明确它所创建的复杂对象，也可以提供一个方法返回创建好的复杂产品对象；</li>
<li>Product-产品角色是被构建的复杂对象，包含多个组成部件；</li>
<li>Director-指挥者负责安排复杂对象的建造次序，指挥者与抽象建造者之间存在关联关系，可以在其construct()建造方法中调用建造者对象的部件构造与装配方法，完成复杂对象的建造</li>
</ul>
<h3 id="建造者模式的结构中引入了一个指挥者类，该类的作用主要有两个："><a href="#建造者模式的结构中引入了一个指挥者类，该类的作用主要有两个：" class="headerlink" title="建造者模式的结构中引入了一个指挥者类，该类的作用主要有两个："></a>建造者模式的结构中引入了一个指挥者类，该类的作用主要有两个：</h3><ul>
<li>一方面它隔离了客户与生产过程；</li>
<li>另一方面它负责控制产品的生成过程。指挥者针对抽象建造者编程，客户端只需要知道具体建造者的类型，即可通过指挥者类调用建造者的相关方法，返回一个完整的产品对象。</li>
</ul>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Builder Class created!'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    buildPart(partName) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Builder.buildPart invoked!'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteBuilder</span> <span class="keyword">extends</span> <span class="title">Builder</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteBuilder Class created!'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    buildPart(partName) &#123;</div><div class="line">        <span class="keyword">super</span>.buildPart(partName);</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteBuilder.buildPart invoked!'</span>);</div><div class="line">        <span class="keyword">this</span>.product = <span class="keyword">new</span> Product(partName);</div><div class="line">    &#125;</div><div class="line">    getResult() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteBuilder.getResult invoked!'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.product;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(material) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"Product class created"</span>);</div><div class="line">        <span class="keyword">this</span>.data = material</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Director</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">this</span>.structure = [<span class="string">'Prod1'</span>, <span class="string">'Prod2'</span>, <span class="string">'Prod3'</span>];</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"Director class created"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    construct() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"Director.Construct created"</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> prodName <span class="keyword">in</span> <span class="keyword">this</span>.structure) &#123;</div><div class="line">            <span class="keyword">let</span> builder = <span class="keyword">new</span> ConcreteBuilder();</div><div class="line">            builder.buildPart(<span class="keyword">this</span>.structure[prodName]);</div><div class="line">            builder.getResult();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> director = <span class="keyword">new</span> Director();</div><div class="line">director.construct();</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> BuilderPattern &#123;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> UserBuilder &#123;</div><div class="line">        <span class="keyword">private</span> name: <span class="built_in">string</span>;</div><div class="line">        <span class="keyword">private</span> age: <span class="built_in">number</span>;</div><div class="line">        <span class="keyword">private</span> phone: <span class="built_in">string</span>;</div><div class="line">        <span class="keyword">private</span> address: <span class="built_in">string</span>;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</div><div class="line">            <span class="keyword">this</span>.name = name;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">get</span> Name() &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">        &#125;</div><div class="line">        setAge(value: <span class="built_in">number</span>): UserBuilder &#123;</div><div class="line">            <span class="keyword">this</span>.age = value;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">get</span> Age() &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.age;</div><div class="line">        &#125;</div><div class="line">        setPhone(value: <span class="built_in">string</span>): UserBuilder &#123;</div><div class="line">            <span class="keyword">this</span>.phone = value;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">get</span> Phone() &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.phone;</div><div class="line">        &#125;</div><div class="line">        setAddress(value: <span class="built_in">string</span>): UserBuilder &#123;</div><div class="line">            <span class="keyword">this</span>.address = value;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">get</span> Address() &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.address;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        build(): User &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="keyword">this</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">class</span> User &#123;</div><div class="line">        <span class="keyword">private</span> name: <span class="built_in">string</span>;</div><div class="line">        <span class="keyword">private</span> age: <span class="built_in">number</span>;</div><div class="line">        <span class="keyword">private</span> phone: <span class="built_in">string</span>;</div><div class="line">        <span class="keyword">private</span> address: <span class="built_in">string</span>;</div><div class="line"></div><div class="line">        <span class="keyword">constructor</span>(<span class="params">builder: UserBuilder</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.name = builder.Name;</div><div class="line">            <span class="keyword">this</span>.age = builder.Age;</div><div class="line">            <span class="keyword">this</span>.phone = builder.Phone;</div><div class="line">            <span class="keyword">this</span>.address = builder.Address</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">get</span> Name() &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">get</span> Age() &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.age;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">get</span> Phone() &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.phone;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">get</span> Address() &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.address;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><p><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></p>
</li>
<li><p><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></p>
</li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Creational Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Creational-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="建造者模式" scheme="https://zhangbihua.github.io/tags/%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>单例模式(Singleton)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/Singleton/"/>
    <id>https://zhangbihua.github.io/2017/05/05/Singleton/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<h3 id="单例模式的定义"><a href="#单例模式的定义" class="headerlink" title="单例模式的定义"></a>单例模式的定义</h3><ul>
<li>某个类只能有一个实例；</li>
<li>它必须自行创建这个实例；</li>
<li>它必须自行向整个系统提供这个实例。</li>
</ul>
<h3 id="单例模式的实现过程中，需要注意如下三点："><a href="#单例模式的实现过程中，需要注意如下三点：" class="headerlink" title="单例模式的实现过程中，需要注意如下三点："></a>单例模式的实现过程中，需要注意如下三点：</h3><ul>
<li>单例类的构造函数为私有；</li>
<li>提供一个自身的静态私有成员变量；</li>
<li>提供一个公有的静态工厂方法。</li>
</ul>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(data) &#123;</div><div class="line">        <span class="keyword">if</span> (Singleton.prototype.Instance === <span class="literal">undefined</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.data = data;</div><div class="line">            Singleton.prototype.Instance = <span class="keyword">this</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> Singleton.prototype.Instance;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> ob1 = <span class="keyword">new</span> Singleton.getInstance();</div><div class="line"><span class="keyword">let</span> ob2 = <span class="keyword">new</span> Singleton(<span class="string">"two"</span>);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(ob1 === ob2);</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Singleton &#123;</div><div class="line">  <span class="keyword">private</span> <span class="keyword">static</span> instance: Singleton;</div><div class="line"></div><div class="line">  <span class="keyword">constructor</span>(<span class="params"></span>) &#123;&#125;</div><div class="line"></div><div class="line">  <span class="keyword">static</span> <span class="keyword">get</span> Instance() &#123;</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.instance === <span class="literal">null</span> || <span class="keyword">this</span>.instance === <span class="literal">undefined</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.instance = <span class="keyword">new</span> Singleton();</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.instance;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> ob1 = <span class="keyword">new</span> Singleton(<span class="string">"one"</span>);</div><div class="line"><span class="keyword">let</span> ob2 = <span class="keyword">new</span> Singleton(<span class="string">"two"</span>);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(ob1 === ob2);</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><p><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></p>
</li>
<li><p><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></p>
</li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Creational Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Creational-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="单例模式" scheme="https://zhangbihua.github.io/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>简单工厂模式(Factory)-设计模式</title>
    <link href="https://zhangbihua.github.io/2017/05/05/SimpleFactory/"/>
    <id>https://zhangbihua.github.io/2017/05/05/SimpleFactory/</id>
    <published>2017-05-05T15:58:44.000Z</published>
    <updated>2017-07-08T08:04:09.419Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。<br>软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，<br>实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。</p>
</blockquote>
<h3 id="简单工厂模式的定义"><a href="#简单工厂模式的定义" class="headerlink" title="简单工厂模式的定义"></a>简单工厂模式的定义</h3><ul>
<li>简单工厂模式：当你需要什么，只需要传入一个正确的参数，就可以获取你所需要的对象，而无须知道其创建细节。</li>
</ul>
<h3 id="简单工厂模式包含三个角色："><a href="#简单工厂模式包含三个角色：" class="headerlink" title="简单工厂模式包含三个角色："></a>简单工厂模式包含三个角色：</h3><ul>
<li>Factory-工厂角色负责实现创建所有实例的内部逻辑；</li>
<li>Product-抽象产品角色是所创建的所有对象的父类，负责描述所有实例所共有的公共接口；</li>
<li>ConcreteProduct-具体产品角色是创建目标，所有创建的对象都充当这个角色的某个具体类的实例。</li>
</ul>
<hr>
<h3 id="ES6实现"><a href="#ES6实现" class="headerlink" title="ES6实现"></a>ES6实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Product Class created'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProduct</span> <span class="keyword">extends</span> <span class="title">Product</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteProduct Class created'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Creator</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Creator Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    factoryMethod() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Creator.factoryMethod created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    anOperation() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Creator.anOperation created'</span>);</div><div class="line">        <span class="keyword">this</span>.product = <span class="keyword">this</span>.factoryMethod();</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.product <span class="keyword">instanceof</span> ConcreteProduct);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteCreator</span> <span class="keyword">extends</span> <span class="title">Creator</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteCreator Class created'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    factoryMethod() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProduct();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> factory = <span class="keyword">new</span> ConcreteCreator();</div><div class="line">factory.anOperation();</div></pre></td></tr></table></figure>
<hr>
<h3 id="Typescript实现"><a href="#Typescript实现" class="headerlink" title="Typescript实现"></a>Typescript实现</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">interface</span> AbstractProduct &#123;</div><div class="line">    method(param?: <span class="built_in">any</span>) : <span class="built_in">void</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> ConcreteProductA <span class="keyword">implements</span> AbstractProduct &#123;</div><div class="line">    method = <span class="function">(<span class="params">param?: <span class="built_in">any</span></span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Method of ConcreteProductA"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> ConcreteProductB <span class="keyword">implements</span> AbstractProduct &#123;</div><div class="line">    method = <span class="function">(<span class="params">param?: <span class="built_in">any</span></span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Method of ConcreteProductB"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> ProductFactory &#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> createProduct(<span class="keyword">type</span>: <span class="built_in">string</span>) : AbstractProduct &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">type</span> === <span class="string">"A"</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProductA();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">type</span> === <span class="string">"B"</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProductB();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="参考以下内容"><a href="#参考以下内容" class="headerlink" title="参考以下内容:"></a>参考以下内容:</h2><ul>
<li><p><a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="external">图说设计模式</a></p>
</li>
<li><p><a href="https://github.com/ryouaki/ECMAScript2016-Design-Patterns" target="_blank" rel="external">ECMAScript2016-Design-Patterns</a></p>
</li>
<li><a href="https://github.com/torokmark/design_patterns_in_typescript" target="_blank" rel="external">Design Patterns in TypeScript</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;软件模式是将模式的一般概念应用于软件开发领域，即软件开发的 总体指导思路或参照样板。&lt;br&gt;软件模式并非仅限于设计模式，还包括 架构模式、分析模式和过程模式等，&lt;br&gt;实际上，在软件生存期的每一个阶段都存在着一些被认同的模式。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="design-pattern" scheme="https://zhangbihua.github.io/categories/design-pattern/"/>
    
      <category term="Creational Patterns" scheme="https://zhangbihua.github.io/categories/design-pattern/Creational-Patterns/"/>
    
    
      <category term="javasctipt" scheme="https://zhangbihua.github.io/tags/javasctipt/"/>
    
      <category term="简单工厂模式" scheme="https://zhangbihua.github.io/tags/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
</feed>
